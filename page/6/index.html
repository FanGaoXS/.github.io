<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>FanGaoXS&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="FanGaoXS&#39;s blog">
<meta property="og:url" content="https://fangaoxs.github.io/page/6/index.html">
<meta property="og:site_name" content="FanGaoXS&#39;s blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="FanGaoXS">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="FanGaoXS's blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.1.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">FanGaoXS&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS 订阅"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="搜索"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://fangaoxs.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-front-end/vue/封装tabbar/利用vue封装TabBer导航栏" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/11/10/front-end/vue/%E5%B0%81%E8%A3%85tabbar/%E5%88%A9%E7%94%A8vue%E5%B0%81%E8%A3%85TabBer%E5%AF%BC%E8%88%AA%E6%A0%8F/" class="article-date">
  <time class="dt-published" datetime="2020-11-10T07:30:39.000Z" itemprop="datePublished">2020-11-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/11/10/front-end/vue/%E5%B0%81%E8%A3%85tabbar/%E5%88%A9%E7%94%A8vue%E5%B0%81%E8%A3%85TabBer%E5%AF%BC%E8%88%AA%E6%A0%8F/">利用vue封装TabBer导航栏</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="利用vue封装TabBer导航栏"><a href="#利用vue封装TabBer导航栏" class="headerlink" title="利用vue封装TabBer导航栏"></a>利用vue封装TabBer导航栏</h1><h2 id="1、利用vue-cli2构建项目"><a href="#1、利用vue-cli2构建项目" class="headerlink" title="1、利用vue-cli2构建项目"></a>1、利用vue-cli2构建项目</h2><p>需要在构建项目的时候安装vue-router</p>
<h2 id="2、搭建项目文件路径"><a href="#2、搭建项目文件路径" class="headerlink" title="2、搭建项目文件路径"></a>2、搭建项目文件路径</h2><p><img src="/2020/11/10/front-end/vue/%E5%B0%81%E8%A3%85tabbar/%E5%88%A9%E7%94%A8vue%E5%B0%81%E8%A3%85TabBer%E5%AF%BC%E8%88%AA%E6%A0%8F/image-20201110173228831.png"></p>
<p>asset里存放图片和css，同时创建一个img文件夹存放图片，再建立一个tabbar子文件夹存放tabbar需要的图片。分别是导航栏未被选中和被选中的图片。</p>
<p>components里就存放公共的组件，比如轮播、导航栏等。</p>
<p>router里就存放router路由组件了。</p>
<p>views就具体存放页面的组件，比如主页（home）、分类（category）、购物车（shopcart）、我的（profile）。</p>
<h2 id="3、封装TabBarItem"><a href="#3、封装TabBarItem" class="headerlink" title="3、封装TabBarItem"></a>3、封装TabBarItem</h2><p>TabBarItem就是TabBar导航栏的单个组件，比如：</p>
<p><img src="/2020/11/10/front-end/vue/%E5%B0%81%E8%A3%85tabbar/%E5%88%A9%E7%94%A8vue%E5%B0%81%E8%A3%85TabBer%E5%AF%BC%E8%88%AA%E6%A0%8F/image-20201110173854657.png"></p>
<p>所以我们先从最小的封装起。</p>
<p>创建一个组件，名叫TabBarItem.vue。这个组件里面只有一张图片和一排文字（实际上会有两张图片，活跃的时候显示深色图标，不活跃的时候显示浅色图标）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;&lt;!-- TabBarItem模板 --&gt;</span><br><span class="line">  &lt;div class=&quot;tab-bar-item&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 图片 --&gt;</span><br><span class="line">    &lt;div class=&quot;item-icon&quot;&gt;</span><br><span class="line">      &lt;!-- 不活跃 --&gt;</span><br><span class="line">      &lt;slot v-if=&quot;!isActive&quot; name=&quot;item-icon&quot;&gt;导航栏原始图片&lt;/slot&gt;</span><br><span class="line">      &lt;!-- 活跃 --&gt;</span><br><span class="line">      &lt;slot v-else name=&quot;item-icon-active&quot;&gt;导航栏活跃图片&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 文字（动态绑定class） --&gt;</span><br><span class="line">    &lt;div :class=&quot;&#123;&#x27;item-text-active&#x27;:isActive&#125;&quot;&gt;</span><br><span class="line">      &lt;slot name=&quot;item-text&quot;&gt;导航栏文字&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>所以我就利用isActive来判断该页面是否活跃。同时定义好Item的样式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">  /* item样式 */</span><br><span class="line">  .tab-bar-item &#123;</span><br><span class="line">    /* 依次从左往右顺序排列 */</span><br><span class="line">    flex: 1;</span><br><span class="line">    /* 文字居中 */</span><br><span class="line">    text-align: center;</span><br><span class="line">    /* 高度 */</span><br><span class="line">    height: 49px;</span><br><span class="line">    /* 文字大小 */</span><br><span class="line">    font-size: 14px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /* item图片样式 */</span><br><span class="line">  .item-icon img&#123;</span><br><span class="line">    width: 24px;</span><br><span class="line">    height: 24px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /* item文字样式 */</span><br><span class="line">  .item-text-active &#123;</span><br><span class="line">    color: #13227a;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>注意这里我们选择使用slot插槽来占位图片和文字，方便外部直接用图片和文字来装填，不然就需要创建4个Item。</p>
<p><strong>Tips：</strong>slot插槽仅用来占位用，只需要name属性，class不会作用在他身上。所以直接利用div来绑定class，然后将slot插槽包围起来就好了。</p>
<h2 id="4、封装TabBar"><a href="#4、封装TabBar" class="headerlink" title="4、封装TabBar"></a>4、封装TabBar</h2><p>TabBarItem封装好了就需要将TabBarItem封装到TabBar上了。在一个组件里使用另一个组件就需要先用import导入然后再注册：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  // 导入TabBarItem</span><br><span class="line">  import TabBarItem from &quot;./TabBarItem&quot;;</span><br><span class="line"></span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &quot;TabBar&quot;,</span><br><span class="line">    components:&#123;</span><br><span class="line">      TabBarItem</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>然后在template中使用4个TabBarItem就好了：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;tab-bar&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--首页--&gt;</span><br><span class="line">    &lt;tab-bar-item&gt;</span><br><span class="line">      &lt;img src=&quot;../../assets/img/tabbar/home.svg&quot; alt=&quot;首页&quot; slot=&quot;item-icon&quot;&gt;</span><br><span class="line">      &lt;img src=&quot;../../assets/img/tabbar/home_active.svg&quot; alt=&quot;首页&quot; slot=&quot;item-icon-active&quot;&gt;</span><br><span class="line">      &lt;div slot=&quot;item-text&quot;&gt;首页&lt;/div&gt;</span><br><span class="line">    &lt;/tab-bar-item&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--分类--&gt;</span><br><span class="line">    &lt;tab-bar-item&gt;</span><br><span class="line">      &lt;img src=&quot;../../assets/img/tabbar/category.svg&quot; alt=&quot;分类&quot; slot=&quot;item-icon&quot;&gt;</span><br><span class="line">      &lt;img src=&quot;../../assets/img/tabbar/category_active.svg&quot; alt=&quot;分类&quot; slot=&quot;item-icon-active&quot;&gt;</span><br><span class="line">      &lt;div slot=&quot;item-text&quot;&gt;分类&lt;/div&gt;</span><br><span class="line">    &lt;/tab-bar-item&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--购物车--&gt;</span><br><span class="line">    &lt;tab-bar-item&gt;</span><br><span class="line">      &lt;img src=&quot;../../assets/img/tabbar/shopcart.svg&quot; alt=&quot;购物车&quot; slot=&quot;item-icon&quot;&gt;</span><br><span class="line">      &lt;img src=&quot;../../assets/img/tabbar/shopcart_active.svg&quot; alt=&quot;购物车&quot; slot=&quot;item-icon-active&quot;&gt;</span><br><span class="line">      &lt;div slot=&quot;item-text&quot;&gt;购物车&lt;/div&gt;</span><br><span class="line">    &lt;/tab-bar-item&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--我的--&gt;</span><br><span class="line">    &lt;tab-bar-item&gt;</span><br><span class="line">      &lt;img src=&quot;../../assets/img/tabbar/profile.svg&quot; alt=&quot;我的&quot; slot=&quot;item-icon&quot;&gt;</span><br><span class="line">      &lt;img src=&quot;../../assets/img/tabbar/profile_active.svg&quot; alt=&quot;我的&quot; slot=&quot;item-icon-active&quot;&gt;</span><br><span class="line">      &lt;div slot=&quot;item-text&quot;&gt;我的&lt;/div&gt;</span><br><span class="line">    &lt;/tab-bar-item&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>注意slot分别将对应的图片和文字插入到插槽里。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">  .tab-bar&#123;</span><br><span class="line">    /* 依次从左往右顺序排列 */</span><br><span class="line">    display: flex;</span><br><span class="line">    /* 背景颜色 */</span><br><span class="line">    background-color: #f6f6f6;</span><br><span class="line">    /* 位置固定 */</span><br><span class="line">    position: fixed;</span><br><span class="line">    /* 位置固定到屏幕最下方 */</span><br><span class="line">    left: 0;</span><br><span class="line">    right: 0;</span><br><span class="line">    bottom: 0;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>这是TabBar的样式。</p>
<h2 id="5、将TabBar引入App-vue中"><a href="#5、将TabBar引入App-vue中" class="headerlink" title="5、将TabBar引入App.vue中"></a>5、将TabBar引入App.vue中</h2><p>将组件引入另一个组件同样是需要先用import导入再在components里注册</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">// 导入TabBar</span><br><span class="line">import TabBar from &quot;./components/tabber/TabBar&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  components:&#123;</span><br><span class="line">    TabBar</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>然后就可以在template中使用了：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 底下导航栏 --&gt;</span><br><span class="line">    &lt;tab-bar&gt;&lt;/tab-bar&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>到这里，我们大致的TabBar就封装完成。但是我们还需要给它封装跳转的相关逻辑，并且结合vue-router来实现动态路由切换的目的。</p>
<h2 id="6、懒加载4个TabBarItem对应的页面并且配置在routes里"><a href="#6、懒加载4个TabBarItem对应的页面并且配置在routes里" class="headerlink" title="6、懒加载4个TabBarItem对应的页面并且配置在routes里"></a>6、懒加载4个TabBarItem对应的页面并且配置在routes里</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入Vue和VueRouter</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 懒加载组件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Home</span> = (<span class="params"></span>) =&gt; <span class="keyword">import</span>(<span class="string">&#x27;../views/home/Home&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Category</span> = (<span class="params"></span>) =&gt; <span class="keyword">import</span>(<span class="string">&#x27;../views/category/Category&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Shopcart</span> = (<span class="params"></span>) =&gt; <span class="keyword">import</span>(<span class="string">&#x27;../views/shopcart/Shopcart&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Profile</span> = (<span class="params"></span>) =&gt; <span class="keyword">import</span>(<span class="string">&#x27;../views/profile/Profile&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局使用VueRouter</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实例化router</span></span><br><span class="line"><span class="keyword">const</span> router=<span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>:[</span><br><span class="line">    <span class="comment">// 主页</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">      <span class="attr">redirect</span>: <span class="string">&#x27;/home&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// Home页</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Home</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// Category页</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/category&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Category</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// Shopcart页</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/shopcart&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Shopcart</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// Profile页</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/profile&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Profile</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;history&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导出router</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这样就可以在页面里利用router或者router-link来进行跳转了。同时在main.js里引入和注册router：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* eslint-disable no-new */</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  router,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="7、在TabBarItem里利用-router来跳转页面"><a href="#7、在TabBarItem里利用-router来跳转页面" class="headerlink" title="7、在TabBarItem里利用$router来跳转页面"></a>7、在TabBarItem里利用$router来跳转页面</h2><p>因为我们没有使用router-link来跳转页面，所以我们就需要用<code>this.$router.push()</code>或者<code>this.$router.replace()</code>来使用代码进行直接跳转。并且我们需要明白一个逻辑就是为了提高代码的复用性，我们肯定是只需要一个TabBarItem，然后在TabBarItem里放置插槽，然后在外部动态的向插槽里放置图片和文字，所以我们就需要在TabBarItem里动态获取需要跳转的路径然后再在TabBarItem里进行跳转。所以我们就需要在父组件，也就是TabBar里给每个TabBarItem绑定path，然后点击该TabBarItem后获得该path然后再进行跳转。所以我们就需要在TabBar里给每个Item加上path：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;tab-bar&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--首页--&gt;</span><br><span class="line">    &lt;tab-bar-item path=&quot;/home&quot;&gt;</span><br><span class="line">      &lt;img src=&quot;../../assets/img/tabbar/home.svg&quot; alt=&quot;首页&quot; slot=&quot;item-icon&quot;&gt;</span><br><span class="line">      &lt;img src=&quot;../../assets/img/tabbar/home_active.svg&quot; alt=&quot;首页&quot; slot=&quot;item-icon-active&quot;&gt;</span><br><span class="line">      &lt;div slot=&quot;item-text&quot;&gt;首页&lt;/div&gt;</span><br><span class="line">    &lt;/tab-bar-item&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--分类--&gt;</span><br><span class="line">    &lt;tab-bar-item path=&quot;/category&quot;&gt;</span><br><span class="line">      &lt;img src=&quot;../../assets/img/tabbar/category.svg&quot; alt=&quot;分类&quot; slot=&quot;item-icon&quot;&gt;</span><br><span class="line">      &lt;img src=&quot;../../assets/img/tabbar/category_active.svg&quot; alt=&quot;分类&quot; slot=&quot;item-icon-active&quot;&gt;</span><br><span class="line">      &lt;div slot=&quot;item-text&quot;&gt;分类&lt;/div&gt;</span><br><span class="line">    &lt;/tab-bar-item&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--购物车--&gt;</span><br><span class="line">    &lt;tab-bar-item path=&quot;/shopcart&quot;&gt;</span><br><span class="line">      &lt;img src=&quot;../../assets/img/tabbar/shopcart.svg&quot; alt=&quot;购物车&quot; slot=&quot;item-icon&quot;&gt;</span><br><span class="line">      &lt;img src=&quot;../../assets/img/tabbar/shopcart_active.svg&quot; alt=&quot;购物车&quot; slot=&quot;item-icon-active&quot;&gt;</span><br><span class="line">      &lt;div slot=&quot;item-text&quot;&gt;购物车&lt;/div&gt;</span><br><span class="line">    &lt;/tab-bar-item&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--我的--&gt;</span><br><span class="line">    &lt;tab-bar-item path=&quot;/profile&quot;&gt;</span><br><span class="line">      &lt;img src=&quot;../../assets/img/tabbar/profile.svg&quot; alt=&quot;我的&quot; slot=&quot;item-icon&quot;&gt;</span><br><span class="line">      &lt;img src=&quot;../../assets/img/tabbar/profile_active.svg&quot; alt=&quot;我的&quot; slot=&quot;item-icon-active&quot;&gt;</span><br><span class="line">      &lt;div slot=&quot;item-text&quot;&gt;我的&lt;/div&gt;</span><br><span class="line">    &lt;/tab-bar-item&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>注意tab-bar-item标签上的path。因为这是父组件的path，所以我们就可以在子组件利用props来获取：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &quot;TabBarItem&quot;,</span><br><span class="line">    props: &#123;</span><br><span class="line">      // 从父组件获得path</span><br><span class="line">      path: &#123;</span><br><span class="line">        type: String,</span><br><span class="line">        required: true</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      itemClick() &#123;</span><br><span class="line">         this.$router.replace(this.path);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>直接利用props获得path，然后再通过<code>this.$router.replace()</code>将从props里获得的path绑定然后直接跳转。这样就达到了跳转的目的。但是有一个问题：假如说我处在当前页面再进行跳转的话就会跳转到<code>/home/home</code>这个路径下，显然，这是不正确的。所以我们要进行判断，如果现在跳转的页面仍然是当前页面，那么就不跳转：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">itemClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="comment">// 将要跳转页面的path</span></span><br><span class="line">       <span class="keyword">let</span> nextPath=<span class="variable language_">this</span>.<span class="property">path</span>;</span><br><span class="line">       <span class="comment">// 当前页面的path</span></span><br><span class="line">       <span class="keyword">let</span> currentPath=<span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">path</span>;</span><br><span class="line">       <span class="comment">// 避免重复点击当前页报错</span></span><br><span class="line">       <span class="keyword">if</span> (nextPath!==currentPath)&#123;</span><br><span class="line">         <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">replace</span>(nextPath);</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;,</span><br></pre></td></tr></table></figure>

<p>利用<code>this.path</code>获得在TabBar里点击TabBarItem的路径path，然后再利用<code>this.$route.path</code>获得当前活跃的路径（也就是当前页面所处的路径）进行比较，如果相同，说明用户仍然想跳转到该页面，此时不执行跳转，否则将执行跳转。</p>
<p>此时，我们就解决了页面跳转问题并且解决了重复点击Item会报错的问题。</p>
<h2 id="8、动态获取页面的活跃情况并且切换样式"><a href="#8、动态获取页面的活跃情况并且切换样式" class="headerlink" title="8、动态获取页面的活跃情况并且切换样式"></a>8、动态获取页面的活跃情况并且切换样式</h2><p>在实际开发中，用户一般点击到哪个Item，那个Item就会高亮，和其他的Item有着不同的样式，所以我们需要完成动态切换Item样式的需求。首先，我们需要创建一个computed计算属性来保存item的是否活跃：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  <span class="comment">// 判断当前页面是否处于活跃，true：活跃；false：不活跃</span></span><br><span class="line">  <span class="title function_">isActive</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 判断逻辑是：取当前活跃页面的路径字符对从父组件</span></span><br><span class="line"><span class="comment">    * 获得的path进行比较，如果前者包含后者，说明当前</span></span><br><span class="line"><span class="comment">    * 页处于活跃。（包含indexOf的返回值就是0，return</span></span><br><span class="line"><span class="comment">    * true，不包含返回-1，return false）</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">path</span>.<span class="title function_">indexOf</span>(<span class="variable language_">this</span>.<span class="property">path</span>)===<span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>逻辑就是利用从父组件props里获取的path来对this.$route.path（当前页面的路径）进行匹配，如果从父组件传来的路径（this.path）存在当前页面路径（this.$route.path）就返回0，否则返回-1或者字符串存在的下标。所以，就会return，如果等于0说明相匹配，就表明当前路径确实是活跃的，否则不活跃。所以在template里：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;&lt;!-- TabBarItem模板 --&gt;</span><br><span class="line">  &lt;div class=&quot;tab-bar-item&quot; @click=&quot;itemClick&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 图片 --&gt;</span><br><span class="line">    &lt;div class=&quot;item-icon&quot;&gt;</span><br><span class="line">      &lt;!-- 不活跃 --&gt;</span><br><span class="line">      &lt;slot v-if=&quot;!isActive&quot; name=&quot;item-icon&quot;&gt;导航栏原始图片&lt;/slot&gt;</span><br><span class="line">      &lt;!-- 活跃 --&gt;</span><br><span class="line">      &lt;slot v-else name=&quot;item-icon-active&quot;&gt;导航栏活跃图片&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 文字（动态绑定class） --&gt;</span><br><span class="line">    &lt;div :class=&quot;&#123;&#x27;item-text-active&#x27;:isActive&#125;&quot;&gt;</span><br><span class="line">      &lt;slot name=&quot;item-text&quot;&gt;导航栏文字&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>利用isActive来判断当前页面是否处于活跃，如果处于活跃，显示导航栏活跃图片（深色），同时绑定上深色字体的样式。</p>
<h2 id="9、在需要的地方加上router-view供内容显示"><a href="#9、在需要的地方加上router-view供内容显示" class="headerlink" title="9、在需要的地方加上router-view供内容显示"></a>9、在需要的地方加上router-view供内容显示</h2><p>最后在App.vue里加上router-view以显示内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 显示内容 --&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 底下导航栏 --&gt;</span><br><span class="line">    &lt;tab-bar&gt;&lt;/tab-bar&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>




      
    </div>
    <footer class="article-footer">
      <a data-url="https://fangaoxs.github.io/2020/11/10/front-end/vue/%E5%B0%81%E8%A3%85tabbar/%E5%88%A9%E7%94%A8vue%E5%B0%81%E8%A3%85TabBer%E5%AF%BC%E8%88%AA%E6%A0%8F/" data-id="clto66l66003osck6eq6a2uoe" data-title="利用vue封装TabBer导航栏" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-front-end/vue/webpack/webpack" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/10/19/front-end/vue/webpack/webpack/" class="article-date">
  <time class="dt-published" datetime="2020-10-19T07:30:39.000Z" itemprop="datePublished">2020-10-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/10/19/front-end/vue/webpack/webpack/">webpack</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h1><h2 id="1、关于webpack"><a href="#1、关于webpack" class="headerlink" title="1、关于webpack"></a>1、关于webpack</h2><ol>
<li><p>什么是webpack？</p>
<p>webpack可以看做是将模块自动打包的工具，它会自动分析项目结构，然后将一些浏览器不能直接运行的扩展语言（TypeScript等）打包为合适的结构以便用户的浏览器能够进行解析。</p>
<p><img src="/2020/10/19/front-end/vue/webpack/webpack/image-20201014123947084.png"></p>
</li>
<li><p>为什么要用webpack？</p>
<p>因为在Vue中可能会用到大量的文件以及文件依赖以及项目结构，所以就推荐使用webpack来辅助打包。</p>
</li>
<li><p>怎么使用webpack</p>
<p>因为webpack的运行环境依赖node.js，所以需要先自行安装node.js。装好node.js之后再使用npm安装webpack</p>
</li>
<li><p>安装webpack</p>
<p>安装node.js完成后在windows命令行使用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node -v  #查看node.js的环境变量是否生效</span><br></pre></td></tr></table></figure>

<p>如果node环境安装成功，再使用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack@3.6.0 -g</span><br></pre></td></tr></table></figure>

<p>进行全局安装webpack的3.6.0版本。</p>
</li>
</ol>
<h2 id="2、利用webpack进行一次模块化打包"><a href="#2、利用webpack进行一次模块化打包" class="headerlink" title="2、利用webpack进行一次模块化打包"></a>2、利用webpack进行一次模块化打包</h2><p>   webpack可以将之前使用AMD、CommonJS、ES6规范的模块化打包方式简化，只需要将模块代码写好后利用webpack进行打包就可以了。</p>
<ol>
<li><p>新建项目（项目目录结构如下）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">│  index.html</span><br><span class="line">│</span><br><span class="line">├─dist</span><br><span class="line">│      bundle.js</span><br><span class="line">│</span><br><span class="line">└─src</span><br><span class="line">        info.js</span><br><span class="line">        main.js</span><br></pre></td></tr></table></figure>



<p>src存放开发时的源代码，dist存放经过webpack打包后的代码</p>
</li>
<li><p>新建两个js文件，其中一个导出，另外一个导入</p>
<p>info.js：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义变量</span></span><br><span class="line"><span class="keyword">let</span> name=<span class="string">&#x27;测试&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> age=<span class="number">18</span>;</span><br><span class="line"><span class="keyword">let</span> message=<span class="string">&#x27;Hello!Webpack!&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//导出变量（暴露）</span></span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">  name,age,message</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>main.js：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//从info文件中导入</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> info <span class="keyword">from</span> <span class="string">&quot;./info&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(info.<span class="property">name</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(info.<span class="property">age</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(info.<span class="property">message</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>在命令行执行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">webpack ./src/main.js ./dist/bundle.js</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将main.js打包成为bundle.js</span></span><br></pre></td></tr></table></figure>

<p>这个时候webpack就会自动寻找模块之间的依赖关系（前提是代码没有错误），然后将所有的模块打包为一个bundle.js</p>
</li>
<li><p>在html里用script标签引用bundle.js</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./dist/bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>   利用webpack打包的好处就是你只需要专注完成模块内的代码，然后最后使用webpack进行打包，然后直接在html里引用一个js文件就可以了（因为webpack会把所有模块打包成一个js）。</p>
<h2 id="3、webpack的配置"><a href="#3、webpack的配置" class="headerlink" title="3、webpack的配置"></a>3、webpack的配置</h2><p>   因为很多时候我们的项目最好是在项目里面就配置好对应的依赖，webpack也算是项目里的依赖，就所谓的局部依赖，所以我们就需要给当前项目也要配置webpack。</p>
<ol>
<li><p>引入node</p>
<p>因为在webpack里并不能获取当前项目的绝对路径，但是在webpack中又需要使用到它，但是node里面又有一个模块（函数）可以获得绝对路径，所以先引入node</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure>

<p>npm init就是初始化node，-y参数就是全部选择默认（注意项目名不能有中文），接下来就会在项目的根目录里生成一个package.json文件，就是该项目的描述文件，里面的东西都可以自定义</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpackStart&quot;</span><span class="punctuation">,</span> 	#项目名称</span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span>	    #项目版本号</span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span>	    #项目描述</span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;index.js&quot;</span><span class="punctuation">,</span>	    #项目入口</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>             	 #脚本命令</span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;keywords&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span>				#作者</span><br><span class="line">  <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ISC&quot;</span>			#开源协议</span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


</li>
<li><p>编写webpack配置文件</p>
<p>在项目根目录里新建一个名为<code>webpack.config.js</code>文件，该文件就是webpack的配置文件，编辑如下配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//从node的系统模块中获得path</span></span><br><span class="line"><span class="keyword">const</span> path=<span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//指定webpack打包的起点（来源）和终点（目的地）</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>=&#123;</span><br><span class="line">  <span class="comment">//起点字符串路径</span></span><br><span class="line">  <span class="attr">entry</span>:<span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">  <span class="comment">//终点对象</span></span><br><span class="line">  <span class="attr">output</span>:&#123;</span><br><span class="line">    <span class="comment">//路径（拼接字符串）</span></span><br><span class="line">    <span class="attr">path</span>:path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">    <span class="comment">//生成的文件名</span></span><br><span class="line">    <span class="attr">filename</span>:<span class="string">&#x27;bundle.js&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>第一步require(‘path’)就是从node的系统模块中获取path，和在Java中导包类似，然后再用CommonJS的方式导出，再在里面编辑起点和终点，起点直接输入相对路径的字符串，但是终点的参数就必须是个对象，然后path就是利用从node中获取的模块然后将<code>__dirname</code>和<code>dist</code>拼接起来。</p>
</li>
<li><p>在命名行运行webpack</p>
<p>然后在命令行输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack</span><br></pre></td></tr></table></figure>

<p>就可以看到打包成功了。</p>
</li>
</ol>
<h2 id="4、将webpack集成到项目中"><a href="#4、将webpack集成到项目中" class="headerlink" title="4、将webpack集成到项目中"></a>4、将webpack集成到项目中</h2><p>因为大多数开发的时候每个开发人员自己本地环境中都会有一个webpack，所以最好是在项目中就直接指定webpack的版本，这样就不会每次项目从远端拉取到本地的时候使用本地的webpack打包，而是使用项目中自带的webpack打包，因为前端的依赖项中版本之间差距特别大。</p>
<ol>
<li><p>将webpack安装到项目中</p>
<p>利用npm将webpack安装到项目中</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack@3.6.0 --save-dev</span><br></pre></td></tr></table></figure>

<p>–save-dev的意思是保存到项目中并且将它设置为开发时依赖，此时项目中就会多一个<code>node_modules</code>文件夹，里面就会有咱们刚刚下载好的webpack，此时也会看到package.json文件中多了：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;webpack&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.6.0&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>这就是刚刚我们下载并且指定为开发环境使用的webpack</p>
</li>
<li><p>在项目的描述文件（package.json）中配置</p>
<p>在项目中下载好了webpack后在package.json的scripts里配置脚本：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<p>这样就可以直接在项目的命令行里输入npm run build就直接映射到webpack，并且使用项目里面的webpack进行打包了。相当于此时的<code>webpack</code>命令就被映射到了<code>build</code>命令上。</p>
</li>
</ol>
<h2 id="5、利用webpack打包css文件"><a href="#5、利用webpack打包css文件" class="headerlink" title="5、利用webpack打包css文件"></a>5、利用webpack打包css文件</h2><p>因为webpack本身是直接可以将js文件打包的，可是开发的时候我们需要打包除了js的文件怎么办呢？这个时候就需要用到各种各样的loader，比如css-loader（打包css文件）、style-loader（将css样式添加到DOM）</p>
<ol>
<li><p>把项目目录改为用包装css或者js文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">│  index.html</span><br><span class="line">│  package-lock.json</span><br><span class="line">│  package.json</span><br><span class="line">│  webpack.config.js</span><br><span class="line">│</span><br><span class="line">├─dist</span><br><span class="line">│      bundle.js</span><br><span class="line">│</span><br><span class="line">└─src</span><br><span class="line">    │  main.js</span><br><span class="line">    │</span><br><span class="line">    ├─css</span><br><span class="line">    │      index.css</span><br><span class="line">    │</span><br><span class="line">    └─js</span><br><span class="line">            info.js</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>可以看到css和js文件都被放到了对应的包里，而main.js（入口则是放在了外面）</p>
</li>
<li><p>写css文件</p>
<p>index.css：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
<li><p>在js中引入css</p>
<p>main.js：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//从info文件中导入</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> info <span class="keyword">from</span> <span class="string">&quot;./js/info&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(info.<span class="property">name</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(info.<span class="property">age</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(info.<span class="property">message</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//引入css文件</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;./css/index.css&#x27;</span>);</span><br></pre></td></tr></table></figure>


</li>
<li><p>利用npm安装loader</p>
<p>因为webpack是自带将js文件打包的能力的，但是并不具备将其他文件打包的能力，所以我们需要自行安装，假如说如果只安装了css-loader，那么webpack确实具备了解析css文件的能力，但是还需要安装style-loader来将css加载到DOM上。所以：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev css-loader@2.0.2</span><br><span class="line">npm install --save-dev style-loader@0.23.1</span><br></pre></td></tr></table></figure>

<p>分别都以dev开发环境下安装css-loader和style-loader</p>
</li>
<li><p>在webpack.config里配置刚刚安装loader</p>
<p>webpack.config.js：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//从node的系统模块中获得path</span></span><br><span class="line"><span class="keyword">const</span> path=<span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//指定webpack打包的起点（来源）和终点（目的地）</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>=&#123;</span><br><span class="line">  <span class="comment">//起点字符串路径</span></span><br><span class="line">  <span class="attr">entry</span>:<span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">  <span class="comment">//终点对象</span></span><br><span class="line">  <span class="attr">output</span>:&#123;</span><br><span class="line">    <span class="comment">//路径（拼接字符串）</span></span><br><span class="line">    <span class="attr">path</span>:path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">    <span class="comment">//生成的文件名</span></span><br><span class="line">    <span class="attr">filename</span>:<span class="string">&#x27;bundle.js&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">//正则表达式匹配所有以.css结尾的文件</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">//style-loader是将css样式作用到DOM上</span></span><br><span class="line">        <span class="comment">//css-loader是将css文件处理</span></span><br><span class="line">        <span class="comment">//加载的顺序是从右往左加载</span></span><br><span class="line">        <span class="attr">use</span>: [ <span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span> ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>将module导出，并且在module里加载两个loader，注意加载的顺序是从右往左，所以先加载css-loader再加载style-loader</p>
</li>
<li><p>利用webpack将整个项目进行打包</p>
<p>最后依旧是利用webpack将整个项目打包：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="6、利用webpack打包less文件"><a href="#6、利用webpack打包less文件" class="headerlink" title="6、利用webpack打包less文件"></a>6、利用webpack打包less文件</h2><p>有的时候可能需要利用webpack将less文件打包称css文件，这个时候就需要用到less-loader和less工具</p>
<ol>
<li><p>写less文件</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@fontSize:</span><span class="number">50px</span>;</span><br><span class="line"><span class="variable">@fontColor:</span>white;</span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="variable">@fontSize</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@fontColor</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
<li><p>在js里面引入less</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//从info文件中导入</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> info <span class="keyword">from</span> <span class="string">&quot;./js/info&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(info.<span class="property">name</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(info.<span class="property">age</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(info.<span class="property">message</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//引入css文件</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;./css/index.css&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//引入less文件</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;./css/font.less&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>利用npm安装loader和less工具</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev less-loader@4.1.0</span><br><span class="line">npm install --save-dev less@3.9.0</span><br></pre></td></tr></table></figure>
</li>
<li><p>在webpack.config.js里配置刚刚下载好的loader</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//从node的系统模块中获得path</span></span><br><span class="line"><span class="keyword">const</span> path=<span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//指定webpack打包的起点（来源）和终点（目的地）</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>=&#123;</span><br><span class="line">  <span class="comment">//起点字符串路径</span></span><br><span class="line">  <span class="attr">entry</span>:<span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">  <span class="comment">//终点对象</span></span><br><span class="line">  <span class="attr">output</span>:&#123;</span><br><span class="line">    <span class="comment">//路径（拼接字符串）</span></span><br><span class="line">    <span class="attr">path</span>:path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">    <span class="comment">//生成的文件名</span></span><br><span class="line">    <span class="attr">filename</span>:<span class="string">&#x27;bundle.js&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">//正则表达式匹配所有以.css结尾的文件</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">//style-loader是将css样式作用到DOM上</span></span><br><span class="line">        <span class="comment">//css-loader是将css文件处理</span></span><br><span class="line">        <span class="comment">//加载的顺序是从右往左加载</span></span><br><span class="line">        <span class="attr">use</span>: [ <span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span> ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">//正则表达式匹配所有以.less结尾的文件</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="comment">//加载的顺序是从右往左加载</span></span><br><span class="line">        <span class="comment">//less-loader将less文件编译成css</span></span><br><span class="line">        <span class="comment">//css-loader将css文件转换为浏览器可读的文件</span></span><br><span class="line">        <span class="comment">//style-loader将样式添加到DOM上</span></span><br><span class="line">        <span class="attr">use</span>: [ <span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>,<span class="string">&#x27;less-loader&#x27;</span> ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>


</li>
<li><p>利用webpack将整体项目打包</p>
<p>同样是利用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>

<p>将整个项目用webpack进行重新打包</p>
</li>
</ol>
<h2 id="7、利用webpack的url-loader打包图片资源"><a href="#7、利用webpack的url-loader打包图片资源" class="headerlink" title="7、利用webpack的url-loader打包图片资源"></a>7、利用webpack的url-loader打包图片资源</h2><p>同样假如需要利用webpack打包图片资源的时候会分两种情况，在配置loader的时候会限定图片的大小limit，假如图片的大小小于limit那么图片在打包的时候就会被base64编码转换为字符串然后进行显示（通常用于小图片），如果图片超过limit的时候打包的时候就会直接将图片以文件的格式直接存到项目里，这个时候会利用file-loader（通常用于大图片）。保险起见，最好两种方式都使用，小图片利用url-loader打包，大图片利用file-loader打包。</p>
<ol>
<li><p>在项目根目录新建img（自定义名）文件夹用于存放图片</p>
</li>
<li><p>在需要图片的地方引入图片</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">  <span class="comment">/*background-color: red;*/</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;../img/baidu.jpg&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
<li><p>利用npm安装url-loader</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install url-loader@1.1.2 --save-dev</span><br></pre></td></tr></table></figure>

<p>依旧是在开发环境安装url-loader的1.1.2版本</p>
</li>
<li><p>在webpack.config.js里配置webpack</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//从node的系统模块中获得path</span></span><br><span class="line"><span class="keyword">const</span> path=<span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//指定webpack打包的起点（来源）和终点（目的地）</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>=&#123;</span><br><span class="line">  <span class="comment">//起点字符串路径</span></span><br><span class="line">  <span class="attr">entry</span>:<span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">  <span class="comment">//终点对象</span></span><br><span class="line">  <span class="attr">output</span>:&#123;</span><br><span class="line">    <span class="comment">//路径（拼接字符串）</span></span><br><span class="line">    <span class="attr">path</span>:path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">    <span class="comment">//生成的文件名</span></span><br><span class="line">    <span class="attr">filename</span>:<span class="string">&#x27;bundle.js&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">//  css-loader</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">//正则表达式匹配所有以.css结尾的文件</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">//style-loader是将css样式作用到DOM上</span></span><br><span class="line">        <span class="comment">//css-loader是将css文件处理</span></span><br><span class="line">        <span class="comment">//加载的顺序是从右往左加载</span></span><br><span class="line">        <span class="attr">use</span>: [ <span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span> ]</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//  less-loader</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">//正则表达式匹配所有以.less结尾的文件</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="comment">//加载的顺序是从右往左加载</span></span><br><span class="line">        <span class="comment">//less-loader将less文件编译成css</span></span><br><span class="line">        <span class="comment">//css-loader将css文件转换为浏览器可读的文件</span></span><br><span class="line">        <span class="comment">//style-loader将样式添加到DOM上</span></span><br><span class="line">        <span class="comment">/*use: [ &#x27;style-loader&#x27;, &#x27;css-loader&#x27;,&#x27;less-loader&#x27; ]*/</span></span><br><span class="line">        <span class="attr">use</span>:[</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>:<span class="string">&#x27;style-loader&#x27;</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>:<span class="string">&#x27;css-loader&#x27;</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>:<span class="string">&#x27;less-loader&#x27;</span></span><br><span class="line">          &#125;,</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//  url-loader</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// 匹配png/jpg/gif/jpeg等图片资源</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|gif|jpeg)$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="comment">// 限制大小为20kb，默认是8kb</span></span><br><span class="line">              <span class="attr">limit</span>: <span class="number">20480</span>,</span><br><span class="line">              <span class="comment">//name: &#x27;img/[name].[hash:8],[ext]&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>url-loader里有个options的limit参数，这个参数就是限制上传图片的大小，如果上传的图片小于这个大小，webpack则会将这个图片资源利用<strong>base64转码成为字符串</strong>然后在浏览器前台进行显示</p>
</li>
<li><p>利用webpack将项目整体打包</p>
</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>

<h2 id="8、利用webpack的file-loader结合url-loader打包图片资源"><a href="#8、利用webpack的file-loader结合url-loader打包图片资源" class="headerlink" title="8、利用webpack的file-loader结合url-loader打包图片资源"></a>8、利用webpack的file-loader结合url-loader打包图片资源</h2><p>因为url-loader打包的图片资源会有limit限制，图片大小在limit以下的资源会被base64转换为字符串编码，而大于limit以上的资源则会被以文件的形式存到项目里面，所以这个时候就需要用到file-loader，所以url-loader和file-loader最好是同时进行使用的。</p>
<ol>
<li><p>在项目根目录新建img包用于存放图片</p>
</li>
<li><p>在需要图片的地方引入图片</p>
</li>
<li><p>利用npm命令安装file-loader</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install file-loader@3.0.1 --save-dev</span><br></pre></td></tr></table></figure>


</li>
<li><p>在webpack.config.js里配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//从node的系统模块中获得path</span></span><br><span class="line"><span class="keyword">const</span> path=<span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//指定webpack打包的起点（来源）和终点（目的地）</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>=&#123;</span><br><span class="line">  <span class="comment">//起点字符串路径</span></span><br><span class="line">  <span class="attr">entry</span>:<span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">  <span class="comment">//终点对象</span></span><br><span class="line">  <span class="attr">output</span>:&#123;</span><br><span class="line">    <span class="comment">//路径（拼接字符串）</span></span><br><span class="line">    <span class="attr">path</span>:path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">    <span class="comment">//生成的文件名</span></span><br><span class="line">    <span class="attr">filename</span>:<span class="string">&#x27;bundle.js&#x27;</span>,</span><br><span class="line">    <span class="comment">// 是dist目录作为静态资源的根目录</span></span><br><span class="line">    <span class="attr">publicPath</span>:<span class="string">&#x27;dist/&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">//  css-loader</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">//正则表达式匹配所有以.css结尾的文件</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">//style-loader是将css样式作用到DOM上</span></span><br><span class="line">        <span class="comment">//css-loader是将css文件处理</span></span><br><span class="line">        <span class="comment">//加载的顺序是从右往左加载</span></span><br><span class="line">        <span class="attr">use</span>: [ <span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span> ]</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//  less-loader</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">//正则表达式匹配所有以.less结尾的文件</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="comment">//加载的顺序是从右往左加载</span></span><br><span class="line">        <span class="comment">//less-loader将less文件编译成css</span></span><br><span class="line">        <span class="comment">//css-loader将css文件转换为浏览器可读的文件</span></span><br><span class="line">        <span class="comment">//style-loader将样式添加到DOM上</span></span><br><span class="line">        <span class="comment">/*use: [ &#x27;style-loader&#x27;, &#x27;css-loader&#x27;,&#x27;less-loader&#x27; ]*/</span></span><br><span class="line">        <span class="attr">use</span>:[</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>:<span class="string">&#x27;style-loader&#x27;</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>:<span class="string">&#x27;css-loader&#x27;</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>:<span class="string">&#x27;less-loader&#x27;</span></span><br><span class="line">          &#125;,</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//  url-loader和file-loader</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// 匹配png/jpg/gif/jpeg等图片资源</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|gif|jpeg)$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="comment">// 限制大小为20kb，默认是8kb</span></span><br><span class="line">              <span class="attr">limit</span>: <span class="number">20480</span>,</span><br><span class="line">              <span class="comment">// 打包后的图片的命名规则</span></span><br><span class="line">              <span class="attr">name</span>: <span class="string">&#x27;img/[name]_[hash:8].[ext]&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>因为file-loader和url-loader基本上是在一起用的，所以就可以直接写到url-loader里。同时注意name里的命名规则：<code>img/</code>表示存到终点根目录的img目录下，<code>[name]</code>文件名就是原文件名，<code>[hash:8]</code>表示利用hash算法存8位hash值，<code>[ext]</code>表示扩展名依旧是原有扩展名。加上了hash值的目的是为了防止打包后同名的图片会进行覆盖。</p>
</li>
<li><p>利用webpack命令将项目整体打包</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="9、利用webpack的babel-loader将ES6语法转换为ES5"><a href="#9、利用webpack的babel-loader将ES6语法转换为ES5" class="headerlink" title="9、利用webpack的babel-loader将ES6语法转换为ES5"></a>9、利用webpack的babel-loader将ES6语法转换为ES5</h2><p>虽然现在绝大多数浏览器都已经支持ES6语法了，但是为了兼容所有浏览器，ES5的语法基本上可以在所有浏览器上运行。babel工具可以帮助我们将ES6语法的代码直接转换为ES5的代码，这样就可以保证基本上所有的浏览器都可以运行。</p>
<ol>
<li><p>正常写ES6的代码</p>
</li>
<li><p>利用npm安装babel-loader和babel的核心工具</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev babel-loader@7 babel-core babel-preset-es2015</span><br></pre></td></tr></table></figure>
</li>
<li><p>在webpack.config.js里配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//从node的系统模块中获得path</span></span><br><span class="line"><span class="keyword">const</span> path=<span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//指定webpack打包的起点（来源）和终点（目的地）</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>=&#123;</span><br><span class="line">  <span class="comment">//起点字符串路径</span></span><br><span class="line">  <span class="attr">entry</span>:<span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">  <span class="comment">//终点对象</span></span><br><span class="line">  <span class="attr">output</span>:&#123;</span><br><span class="line">    <span class="comment">//路径（拼接字符串）</span></span><br><span class="line">    <span class="attr">path</span>:path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">    <span class="comment">//生成的文件名</span></span><br><span class="line">    <span class="attr">filename</span>:<span class="string">&#x27;bundle.js&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// 匹配以.js为后缀的文件</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="comment">// 排除（不匹配）node_modules或者bower_components</span></span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">presets</span>: [<span class="string">&#x27;es2015&#x27;</span>]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>利用webpack将整个项目打包</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fangaoxs.github.io/2020/10/19/front-end/vue/webpack/webpack/" data-id="clto66l65003lsck6hbk55gu4" data-title="webpack" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/" rel="tag">webpack</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-front-end/ECharts/echarts整合SpringBoot" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/08/28/front-end/ECharts/echarts%E6%95%B4%E5%90%88SpringBoot/" class="article-date">
  <time class="dt-published" datetime="2020-08-28T07:30:39.000Z" itemprop="datePublished">2020-08-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/08/28/front-end/ECharts/echarts%E6%95%B4%E5%90%88SpringBoot/">ECharts简单上手使用并且整合SpringBoot</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1、什么是ECharts"><a href="#1、什么是ECharts" class="headerlink" title="1、什么是ECharts"></a>1、什么是ECharts</h2><p>商业级数据图表，它是一个纯JavaScript的图标库，兼容绝大部分的浏览器，底层依赖轻量级的canvas类库ZRender，提供直观，生动，可交互，可高度个性化定制的数据可视化图表。创新的拖拽重计算、数据视图、值域漫游等特性大大增强了用户体验，赋予了用户对数据进行挖掘、整合的能力。简单点来讲就是纯前端的绘制简单的图表。</p>
<p>官网地址：<a target="_blank" rel="noopener" href="https://echarts.apache.org/">https://echarts.apache.org/</a></p>
<h2 id="2、ECharts能画什么图"><a href="#2、ECharts能画什么图" class="headerlink" title="2、ECharts能画什么图"></a>2、ECharts能画什么图</h2><p>折线图（区域图）、柱状图（条状图）、散点图（气泡图）、K线图、饼图（环形图）</p>
<p>雷达图（填充雷达图）、和弦图、力导向布局图、地图、仪表盘、漏斗图、事件河流图等12类图表</p>
<h2 id="3、安装ECharts"><a href="#3、安装ECharts" class="headerlink" title="3、安装ECharts"></a>3、安装ECharts</h2><p>需要先引入ECharts和jQuery的js，或者直接在html里面引入CDN</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入ECharts.js--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/js/echarts.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--引入jQuery.js--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/js/jquery-3.5.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>因为我们需要整合SpringBoot，所以我就使用Thymeleaf模板引擎来渲染，就需要给src前加上th，像这样：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入ECharts.js--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/js/echarts.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--引入jQuery.js--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/js/jquery-3.5.1.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="4、简单使用ECharts"><a href="#4、简单使用ECharts" class="headerlink" title="4、简单使用ECharts"></a>4、简单使用ECharts</h2><h3 id="4-1-准备一个div盒子来放图表"><a href="#4-1-准备一个div盒子来放图表" class="headerlink" title="4.1 准备一个div盒子来放图表"></a>4.1 准备一个div盒子来放图表</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--为ECharts准备一个id为main，宽高都为500px的盒子--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 500px;height: 500px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-2-利用Dom操作盒子然后设置图表的参数"><a href="#4-2-利用Dom操作盒子然后设置图表的参数" class="headerlink" title="4.2 利用Dom操作盒子然后设置图表的参数"></a>4.2 利用Dom操作盒子然后设置图表的参数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、通过id获取到main并且用echarts初始化</span></span><br><span class="line"><span class="keyword">let</span> myChart=echarts.<span class="title function_">init</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;main&#x27;</span>));</span><br><span class="line"><span class="comment">//2、指定图表的配置项和数据</span></span><br><span class="line"><span class="keyword">let</span> option = &#123;</span><br><span class="line">	<span class="comment">//标题</span></span><br><span class="line">	<span class="attr">title</span>: &#123;</span><br><span class="line">		<span class="attr">text</span>: <span class="string">&#x27;ECharts 入门示例&#x27;</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//配置信息</span></span><br><span class="line">	<span class="attr">tooltip</span>: &#123;&#125;,</span><br><span class="line">	<span class="attr">legend</span>: &#123;</span><br><span class="line">		<span class="attr">data</span>:[<span class="string">&#x27;销量&#x27;</span>]</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">xAxis</span>: &#123;</span><br><span class="line">		<span class="attr">data</span>: [<span class="string">&quot;衬衫&quot;</span>,<span class="string">&quot;羊毛衫&quot;</span>,<span class="string">&quot;雪纺衫&quot;</span>,<span class="string">&quot;裤子&quot;</span>,<span class="string">&quot;高跟鞋&quot;</span>,<span class="string">&quot;袜子&quot;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">yAxis</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">series</span>: [&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;销量&#x27;</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: [<span class="number">10</span>, <span class="number">30</span>, <span class="number">20</span>, <span class="number">80</span>, <span class="number">50</span>, <span class="number">9</span>]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//3、使用刚指定的配置项和数据显示图表。</span></span><br><span class="line">myChart.<span class="title function_">setOption</span>(option);</span><br></pre></td></tr></table></figure>

<p>这样就可以在页面初始化的时候看到图表和图表上呈现数据了。</p>
<h2 id="5、ECharts集合SpringBoot和Ajax"><a href="#5、ECharts集合SpringBoot和Ajax" class="headerlink" title="5、ECharts集合SpringBoot和Ajax"></a>5、ECharts集合SpringBoot和Ajax</h2><p>因为大多数时候数据肯定不会是定死的，所以我们肯定需要从后端加载数据</p>
<h3 id="5-1-后端Controller模拟数据"><a href="#5-1-后端Controller模拟数据" class="headerlink" title="5.1 后端Controller模拟数据"></a>5.1 后端Controller模拟数据</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/data&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> Map <span class="title function_">data</span><span class="params">(<span class="meta">@RequestParam(&quot;id&quot;)</span><span class="type">int</span> id)</span>&#123;</span><br><span class="line">        <span class="comment">//衬衫数量</span></span><br><span class="line">        <span class="type">int</span> shirtNumber=<span class="number">0</span>;</span><br><span class="line">        <span class="comment">//羊毛衫数量</span></span><br><span class="line">        <span class="type">int</span> woolSweaterNumber=<span class="number">0</span>;</span><br><span class="line">        <span class="comment">//雪纺衫数量</span></span><br><span class="line">        <span class="type">int</span> chiffonShirtNumber=<span class="number">0</span>;</span><br><span class="line">        <span class="comment">//裤子数量</span></span><br><span class="line">        <span class="type">int</span> pantsNumber=<span class="number">0</span>;</span><br><span class="line">        <span class="comment">//高跟鞋数量</span></span><br><span class="line">        <span class="type">int</span> highHeelsNumber=<span class="number">0</span>;</span><br><span class="line">        <span class="comment">//袜子数量</span></span><br><span class="line">        <span class="type">int</span> sockNumber=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (id==<span class="number">1</span>)&#123;</span><br><span class="line">            shirtNumber=<span class="number">20</span>;</span><br><span class="line">            woolSweaterNumber=<span class="number">30</span>;</span><br><span class="line">            chiffonShirtNumber=<span class="number">8</span>;</span><br><span class="line">            pantsNumber=<span class="number">80</span>;</span><br><span class="line">            highHeelsNumber=<span class="number">9</span>;</span><br><span class="line">            sockNumber=<span class="number">10</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (id==<span class="number">2</span>)&#123;</span><br><span class="line">            shirtNumber=<span class="number">2</span>;</span><br><span class="line">            woolSweaterNumber=<span class="number">3</span>;</span><br><span class="line">            chiffonShirtNumber=<span class="number">8</span>;</span><br><span class="line">            pantsNumber=<span class="number">8</span>;</span><br><span class="line">            highHeelsNumber=<span class="number">9</span>;</span><br><span class="line">            sockNumber=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        HashMap&lt;String, Integer&gt; numberMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        numberMap.put(<span class="string">&quot;shirtNumber&quot;</span>,shirtNumber);</span><br><span class="line">        numberMap.put(<span class="string">&quot;woolSweaterNumber&quot;</span>,woolSweaterNumber);</span><br><span class="line">        numberMap.put(<span class="string">&quot;chiffonShirtNumber&quot;</span>,chiffonShirtNumber);</span><br><span class="line">        numberMap.put(<span class="string">&quot;pantsNumber&quot;</span>,pantsNumber);</span><br><span class="line">        numberMap.put(<span class="string">&quot;highHeelsNumber&quot;</span>,highHeelsNumber);</span><br><span class="line">        numberMap.put(<span class="string">&quot;sockNumber&quot;</span>,sockNumber);</span><br><span class="line">        <span class="keyword">return</span> numberMap;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>发起<code>/test/data</code>这个请求并且携带一个id作为参数，就可以得到key-value的键值对集合来模拟真实的数据。</p>
<h3 id="5-2-前端利用Ajax发起请求获得数据"><a href="#5-2-前端利用Ajax发起请求获得数据" class="headerlink" title="5.2 前端利用Ajax发起请求获得数据"></a>5.2 前端利用Ajax发起请求获得数据</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、通过id获取到main并且用echarts初始化</span></span><br><span class="line">      <span class="keyword">let</span> myChart=echarts.<span class="title function_">init</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;main&#x27;</span>));</span><br><span class="line">      <span class="comment">//开启loading效果</span></span><br><span class="line">      myChart.<span class="title function_">showLoading</span>();</span><br><span class="line">      <span class="comment">//Ajax的post请求</span></span><br><span class="line">      $.<span class="title function_">post</span>(&#123;</span><br><span class="line">          <span class="comment">//向后端发起的请求</span></span><br><span class="line">          <span class="attr">url</span>:<span class="string">&#x27;/test/data&#x27;</span>,</span><br><span class="line">          <span class="comment">//向后端发起的请求并且携带的数据</span></span><br><span class="line">          <span class="attr">data</span>: &#123;</span><br><span class="line">              <span class="attr">id</span>: id</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="comment">//异步开启</span></span><br><span class="line">          <span class="attr">async</span>:<span class="literal">true</span>,</span><br><span class="line">          <span class="comment">//请求成功的回调函数</span></span><br><span class="line">          <span class="attr">success</span>:<span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">              myChart.<span class="title function_">hideLoading</span>();<span class="comment">//关闭loading效果</span></span><br><span class="line">              <span class="comment">//打印回调里携带的数据</span></span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">              number.<span class="property">shirtNumber</span>=e.<span class="property">shirtNumber</span>;</span><br><span class="line">              number.<span class="property">woolSweaterNumber</span>=e.<span class="property">woolSweaterNumber</span>;</span><br><span class="line">              number.<span class="property">chiffonShirtNumber</span>=e.<span class="property">chiffonShirtNumber</span>;</span><br><span class="line">              number.<span class="property">pantsNumber</span>=e.<span class="property">pantsNumber</span>;</span><br><span class="line">              number.<span class="property">highHeelsNumber</span>=e.<span class="property">highHeelsNumber</span>;</span><br><span class="line">              number.<span class="property">sockNumber</span>=e.<span class="property">sockNumber</span>;</span><br><span class="line">              <span class="comment">//2、指定图表的配置项和数据</span></span><br><span class="line">              <span class="keyword">let</span> option = &#123;</span><br><span class="line">                  <span class="comment">//标题</span></span><br><span class="line">                  <span class="attr">title</span>: &#123;</span><br><span class="line">                      <span class="attr">text</span>: <span class="string">&#x27;ECharts 入门示例&#x27;</span></span><br><span class="line">                  &#125;,</span><br><span class="line">                  <span class="comment">//配置信息</span></span><br><span class="line">                  <span class="attr">tooltip</span>: &#123;&#125;,</span><br><span class="line">                  <span class="attr">legend</span>: &#123;</span><br><span class="line">                      <span class="attr">data</span>:[<span class="string">&#x27;销量&#x27;</span>]</span><br><span class="line">                  &#125;,</span><br><span class="line">                  <span class="attr">xAxis</span>: &#123;</span><br><span class="line">                      <span class="attr">data</span>: [<span class="string">&quot;衬衫&quot;</span>,<span class="string">&quot;羊毛衫&quot;</span>,<span class="string">&quot;雪纺衫&quot;</span>,<span class="string">&quot;裤子&quot;</span>,<span class="string">&quot;高跟鞋&quot;</span>,<span class="string">&quot;袜子&quot;</span>]</span><br><span class="line">                  &#125;,</span><br><span class="line">                  <span class="attr">yAxis</span>: &#123;&#125;,</span><br><span class="line">                  <span class="attr">series</span>: [&#123;</span><br><span class="line">                      <span class="attr">name</span>: <span class="string">&#x27;销量&#x27;</span>,</span><br><span class="line">                      <span class="attr">type</span>: <span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">                      <span class="attr">data</span>: [number.<span class="property">shirtNumber</span>, number.<span class="property">woolSweaterNumber</span>, number.<span class="property">chiffonShirtNumber</span>, number.<span class="property">pantsNumber</span>, number.<span class="property">highHeelsNumber</span>, number.<span class="property">sockNumber</span>]</span><br><span class="line">                  &#125;]</span><br><span class="line">              &#125;;</span><br><span class="line">              <span class="comment">//3、使用刚指定的配置项和数据显示图表。</span></span><br><span class="line">              myChart.<span class="title function_">setOption</span>(option);</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="comment">//请求失败的回调函数</span></span><br><span class="line">          <span class="attr">error</span>:<span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;);</span><br></pre></td></tr></table></figure>

<p>所以数据就会在Ajax发起请求并且成功获取到数据的时候赋给图表里的data。因为ECharts自带loading动画的效果，所以在发起请求的时候使用<code>myChart.showLoading()</code>打开开启loading效果，在请求的成功的回调函数里使用<code>myCharts.hideLoading()</code>关闭loading效果。</p>
<h3 id="5-3-汇总"><a href="#5-3-汇总" class="headerlink" title="5.3 汇总"></a>5.3 汇总</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ECharts演示<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--引入ECharts.js--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/js/echarts.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--引入jQuery.js--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/js/jquery-3.5.1.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--为ECharts准备一个id为main，宽高都为500px的盒子--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 500px;height: 500px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//函数：给销量图上设置销量数据（异步加载）</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">setNumber</span>(<span class="params">number,id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//1、通过id获取到main并且用echarts初始化</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> myChart=echarts.<span class="title function_">init</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;main&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//开启loading效果</span></span></span><br><span class="line"><span class="language-javascript">        myChart.<span class="title function_">showLoading</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//Ajax的post请求</span></span></span><br><span class="line"><span class="language-javascript">        $.<span class="title function_">post</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//向后端发起的请求</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">url</span>:<span class="string">&#x27;/test/data&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//向后端发起的请求并且携带的数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">id</span>: id</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//异步开启</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">async</span>:<span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//请求成功的回调函数</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">success</span>:<span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                myChart.<span class="title function_">hideLoading</span>();<span class="comment">//关闭loading效果</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//打印回调里携带的数据</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span></span><br><span class="line"><span class="language-javascript">                number.<span class="property">shirtNumber</span>=e.<span class="property">shirtNumber</span>;</span></span><br><span class="line"><span class="language-javascript">                number.<span class="property">woolSweaterNumber</span>=e.<span class="property">woolSweaterNumber</span>;</span></span><br><span class="line"><span class="language-javascript">                number.<span class="property">chiffonShirtNumber</span>=e.<span class="property">chiffonShirtNumber</span>;</span></span><br><span class="line"><span class="language-javascript">                number.<span class="property">pantsNumber</span>=e.<span class="property">pantsNumber</span>;</span></span><br><span class="line"><span class="language-javascript">                number.<span class="property">highHeelsNumber</span>=e.<span class="property">highHeelsNumber</span>;</span></span><br><span class="line"><span class="language-javascript">                number.<span class="property">sockNumber</span>=e.<span class="property">sockNumber</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//2、指定图表的配置项和数据</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> option = &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//标题</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">title</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">text</span>: <span class="string">&#x27;ECharts 入门示例&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//配置信息</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">tooltip</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">legend</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>:[<span class="string">&#x27;销量&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">xAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>: [<span class="string">&quot;衬衫&quot;</span>,<span class="string">&quot;羊毛衫&quot;</span>,<span class="string">&quot;雪纺衫&quot;</span>,<span class="string">&quot;裤子&quot;</span>,<span class="string">&quot;高跟鞋&quot;</span>,<span class="string">&quot;袜子&quot;</span>]</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">yAxis</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">series</span>: [&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">name</span>: <span class="string">&#x27;销量&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">type</span>: <span class="string">&#x27;bar&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>: [number.<span class="property">shirtNumber</span>, number.<span class="property">woolSweaterNumber</span>, number.<span class="property">chiffonShirtNumber</span>, number.<span class="property">pantsNumber</span>, number.<span class="property">highHeelsNumber</span>, number.<span class="property">sockNumber</span>]</span></span><br><span class="line"><span class="language-javascript">                    &#125;]</span></span><br><span class="line"><span class="language-javascript">                &#125;;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//3、使用刚指定的配置项和数据显示图表。</span></span></span><br><span class="line"><span class="language-javascript">                myChart.<span class="title function_">setOption</span>(option);</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//请求失败的回调函数</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">error</span>:<span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//全局加载</span></span></span><br><span class="line"><span class="language-javascript">    $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//销量对象</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> number=&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//衬衫数量</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">shirtNumber</span>:<span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//羊毛衫数量</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">woolSweaterNumber</span>:<span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//雪纺衫数量</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">chiffonShirtNumber</span>:<span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//裤子数量</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pantsNumber</span>:<span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//高跟鞋数量</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">highHeelsNumber</span>:<span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//袜子数量</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">sockNumber</span>:<span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> id=<span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(number);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//设置销量图</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setNumber</span>(number,id);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://fangaoxs.github.io/2020/08/28/front-end/ECharts/echarts%E6%95%B4%E5%90%88SpringBoot/" data-id="clto66l510017sck6gkou143r" data-title="ECharts简单上手使用并且整合SpringBoot" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/echarts/" rel="tag">echarts</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-back-end/Java/Java多线程/Java多线程进阶简单梳理" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/08/19/back-end/Java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E8%BF%9B%E9%98%B6%E7%AE%80%E5%8D%95%E6%A2%B3%E7%90%86/" class="article-date">
  <time class="dt-published" datetime="2020-08-19T07:30:39.000Z" itemprop="datePublished">2020-08-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/08/19/back-end/Java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E8%BF%9B%E9%98%B6%E7%AE%80%E5%8D%95%E6%A2%B3%E7%90%86/">Java多线程进阶简单梳理</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Java多线程进阶简单梳理"><a href="#Java多线程进阶简单梳理" class="headerlink" title="Java多线程进阶简单梳理"></a>Java多线程进阶简单梳理</h1><h2 id="1、什么是进程？什么是线程"><a href="#1、什么是进程？什么是线程" class="headerlink" title="1、什么是进程？什么是线程?"></a>1、什么是进程？什么是线程?</h2><p>进程就是一个应用程序；线程就是进程中的执行单元。一个进程可以启动多个线程。</p>
<h2 id="2、运行Java应用程序时"><a href="#2、运行Java应用程序时" class="headerlink" title="2、运行Java应用程序时"></a>2、运行Java应用程序时</h2><p>启动JVM就是一个进程。JVM就会启动main（主线程），同时调用垃圾回收线程负责守护，回收垃圾。</p>
<p>所以Java应用程序里至少有两个线程并发，主线程和垃圾回收线程。</p>
<h2 id="3、进程和线程有什么关系？"><a href="#3、进程和线程有什么关系？" class="headerlink" title="3、进程和线程有什么关系？"></a>3、进程和线程有什么关系？</h2><p>进程可以看作大公司，而线程可以看作公司里的员工。</p>
<p>进程与进程之间，内存独立不共享。</p>
<p>线程与线程之间，堆内存和方法区内存共享。栈内存独立。一个线程一个栈，栈内存与栈内存独立。</p>
<p>Java中的多线程机制，目的就是为了提高程序的处理效率。</p>
<p>线程之间宏观上同时进行，微观上依次进行。</p>
<h2 id="4、run-和start-的区别"><a href="#4、run-和start-的区别" class="headerlink" title="4、run( )和start( )的区别"></a>4、run( )和start( )的区别</h2><ul>
<li><p>run( )</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestThread01</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 主线程线程体</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建线程对象</span></span><br><span class="line">        <span class="type">Thread_01</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread_01</span>();</span><br><span class="line">        <span class="comment">//调用run()方法只是单纯的调用Thread_01类里的run方法，并没有开辟新的栈内存</span></span><br><span class="line">        t1.run();</span><br><span class="line">        <span class="comment">//run()方法里的代码执行完才会接着执行主线程剩余的代码</span></span><br><span class="line">        <span class="comment">//主线程打印</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;main-&gt;&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Thread_01</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分支线程线程体</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Thread_01-&gt;&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果调用分支线程对象的run( )方法，就只是单纯地调用了Thread_01这个类里的run( )方法并没有开辟分支线程的栈空间，Java会严格按照代码行的顺序执行，所以它会执行完run( )方法，再执行主线程里接下来的方法。</p>
<p>JVM内存图：</p>
<p><img src="/2020/08/19/back-end/Java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E8%BF%9B%E9%98%B6%E7%AE%80%E5%8D%95%E6%A2%B3%E7%90%86/image-20200816204633890.png"></p>
<p>当执行到<code>t1.run()</code>的时候主线程里会开辟run方法栈帧执行run方法，等run方法执行完毕后才接着执行主线程里剩余的代码。</p>
<p>总结：所以执行run方法就是单纯的执行线程类里的run方法，并且先让run方法执行完了之后再执行主线程里的接下来的代码。在内存里也并没有开启新的分支线程栈</p>
</li>
<li><p>start( )</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestThread01</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 主线程线程体</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建线程对象</span></span><br><span class="line">        <span class="type">Thread_01</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread_01</span>();</span><br><span class="line">        <span class="comment">//调用start()方法就会开启分支线程栈同时立马执行分支线程中的run方法</span></span><br><span class="line">        t1.start();</span><br><span class="line">        <span class="comment">//主线程打印</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;main-&gt;&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Thread_01</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分支线程线程体</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Thread_01-&gt;&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当创建线程对象后调用start()方法的时候就会开辟新的分支线程栈同时才会执行分支线程中的run方法。所以start方法就仅仅相当于开启线程的作用。开启成功后这行代码就结束了，主线程就会接着执行剩下的代码，这个时候分支线程和主线程是并发的。</p>
<p>JVM内存图：</p>
<p><img src="/2020/08/19/back-end/Java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E8%BF%9B%E9%98%B6%E7%AE%80%E5%8D%95%E6%A2%B3%E7%90%86/image-20200816205535961.png"></p>
<p>当t1执行start( )方法的时候，就会立马开辟一个分支线程t1的栈，然后分支线程立马执行run方法，同时start( )方法结束，执行接下的方法，所以此时主线程和分支线程是并发的。</p>
<p>总结：所以执行start方法才是开辟了分支线程的栈，然后立马执行run方法。这才是并发。此时，主线程的main方法和分支线程的run方法是平级的。</p>
</li>
</ul>
<h2 id="5、使用继承Thread还是实现Runnable？"><a href="#5、使用继承Thread还是实现Runnable？" class="headerlink" title="5、使用继承Thread还是实现Runnable？"></a>5、使用继承Thread还是实现Runnable？</h2><p>推荐使用实现Runnable的方法创建线程，因为Java支持单继承实现多接口，如果采用继承Thread的方法的话，那么他就不能再继承另外的方法了，实现Runnable接口则既可以继承另外的类，还可以实现另外的接口。</p>
<h2 id="6、线程的生命周期"><a href="#6、线程的生命周期" class="headerlink" title="6、线程的生命周期"></a>6、线程的生命周期</h2><p>线程一共有5个生命周期：</p>
<ol>
<li>新建状态：线程对象刚刚被创建的时候（刚被new出来）</li>
<li>就绪状态：（线程对象执行start( )方法后线程会进入就绪状态）此时线程又叫做可运行状态，拥有能够抢夺CPU时间片（执行权）的权利，如果抢到了CPU时间片，那么他就会执行run方法，执行run方法就标志着这个线程进入了运行状态。</li>
<li>运行状态：抢夺到了CPU时间片的线程就会执行run方法，执行run方法就标志着这个线程进入了运行状态，当占有的时间片结束之后，就会回到就绪状态继续抢夺时间片。下一次运行的时候就会接着上次的run方法运行。</li>
<li>阻塞状态：当线程运行过程中遇到阻塞事件，比如用户输入或者sleep就会进入阻塞状态，释放掉之前抢夺的时间片回到就绪状态重新开始抢夺。</li>
<li>死亡状态：线程的run方法运行结束线程就会变成死亡状态。</li>
</ol>
<p>状态图：</p>
<p><img src="/2020/08/19/back-end/Java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E8%BF%9B%E9%98%B6%E7%AE%80%E5%8D%95%E6%A2%B3%E7%90%86/image-20200816221704542.png"></p>
<h2 id="7、interrupt-打断线程sleep"><a href="#7、interrupt-打断线程sleep" class="headerlink" title="7、interrupt( )打断线程sleep"></a>7、interrupt( )打断线程sleep</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestThread01</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 主线程线程体</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Thread_01</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread_01</span>();</span><br><span class="line">        t1.start();</span><br><span class="line">        <span class="comment">//t1线程停止睡眠</span></span><br><span class="line">        t1.interrupt();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Thread_01</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分支线程线程体</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;---&gt;begin&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">100000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;---&gt;end&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过执行需要醒来的线程的interrupt方法打断线程休眠。其实质是让正在休眠（正在执行sleep方法）的线程抛出异常，从而执行catch而跳出sleep方法。</p>
<h2 id="8、常见线程调度模型"><a href="#8、常见线程调度模型" class="headerlink" title="8、常见线程调度模型"></a>8、常见线程调度模型</h2><ol>
<li><p>抢占式调度模型：（Java采用）</p>
<p>线程优先级（权重）越高，抢到CPU时间片的概率就高一点。</p>
</li>
<li><p>均分式调度模型：</p>
<p>平均分配CPU时间片，每个线程占有的CPU时间片长度一样。平均分配，线程之间都是平等的。</p>
</li>
</ol>
<h2 id="9、什么时候需要考虑线程安全问题？"><a href="#9、什么时候需要考虑线程安全问题？" class="headerlink" title="9、什么时候需要考虑线程安全问题？"></a>9、什么时候需要考虑线程安全问题？</h2><ol>
<li>多线程并发</li>
<li>线程共享某一公共资源</li>
<li>线程同时修改某一公共资源</li>
</ol>
<h2 id="10、怎么解决线程安全问题"><a href="#10、怎么解决线程安全问题" class="headerlink" title="10、怎么解决线程安全问题"></a>10、怎么解决线程安全问题</h2><p>采用<strong>“线程同步机制”</strong>：线程排队执行，不并发，会降低效率。用效率换取安全，安全第一。</p>
<h2 id="11、同步编程模型和异步编程模型"><a href="#11、同步编程模型和异步编程模型" class="headerlink" title="11、同步编程模型和异步编程模型"></a>11、同步编程模型和异步编程模型</h2><ul>
<li>同步（Synchronous）编程模型：线程A和线程B依次排队执行。</li>
<li>异步（Asynchronous）编程模型：线程A和线程B互相执行，互不干扰，并发。</li>
</ul>
<h2 id="12、synchronized同步代码块"><a href="#12、synchronized同步代码块" class="headerlink" title="12、synchronized同步代码块"></a>12、synchronized同步代码块</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span>(共享的对象)&#123;</span><br><span class="line">    代码块</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在Java中，任何对象都有一把“锁”，synchronized代码块就是某个线程执行的时候，将这个对象锁占有，然后另外的线程就不能执行了。只有等这个代码块执行完毕，释放对象锁。（这里注意考虑一下栈、堆、方法区中变量）</p>
<h2 id="13、死锁（deadlock）的例子"><a href="#13、死锁（deadlock）的例子" class="headerlink" title="13、死锁（deadlock）的例子"></a>13、死锁（deadlock）的例子</h2><p>线程1：需要资源A和资源B</p>
<p>线程2：需要资源B和资源A</p>
<p>有一种情况线程1拿到了资源A，线程2拿到了资源B，此时线程1在等待资源B的释放，线程2在等待资源A的释放，可是只有等线程1用完了资源A、B后才会释放资源A，线程2用完了B、A后才会释放资源B，所以线程1就永远拿不到资源B，所以它永远释放不了资源A，就导致线程2永远拿不到资源A，也永远释放不了资源B。</p>
<h2 id="14、wait-和sleep-方法的区别"><a href="#14、wait-和sleep-方法的区别" class="headerlink" title="14、wait( )和sleep( )方法的区别"></a>14、wait( )和sleep( )方法的区别</h2><ul>
<li><p>wait( )</p>
<p>wait是Object类的方法，它是作用于对象的，目的是让线程中的某个对象释放掉对象锁，然后进入等待状态，等待notify( )来唤醒这个对象所在的线程。</p>
</li>
<li><p>sleep( )</p>
<p>sleep是Thread类的方法，它是作用于线程的，目的是让线程阻塞，阻塞的时候它并不会释放锁。</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fangaoxs.github.io/2020/08/19/back-end/Java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E8%BF%9B%E9%98%B6%E7%AE%80%E5%8D%95%E6%A2%B3%E7%90%86/" data-id="clto66l5d001wsck62gyzdd0l" data-title="Java多线程进阶简单梳理" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-back-end/Java/JavaSE/String进阶" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/08/14/back-end/Java/JavaSE/String%E8%BF%9B%E9%98%B6/" class="article-date">
  <time class="dt-published" datetime="2020-08-14T07:30:39.000Z" itemprop="datePublished">2020-08-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/08/14/back-end/Java/JavaSE/String%E8%BF%9B%E9%98%B6/">String类进阶简单梳理</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1、String类简单介绍"><a href="#1、String类简单介绍" class="headerlink" title="1、String类简单介绍"></a>1、String类简单介绍</h2><p>String类不是Java的8大基本数据类型，它是属于<code>java.lang</code>包下的。</p>
<p>同时由于String类是有final关键字修饰的，所有它不能被继承，不能有子类。</p>
<p>String类的底层是char数组，也是final关键字修饰的，所以它不能被更改。</p>
<h2 id="2、String类的存储原理"><a href="#2、String类的存储原理" class="headerlink" title="2、String类的存储原理"></a>2、String类的存储原理</h2><p>String类对象有个特殊的创建方式，也就是直接指定String类对象等于一个字符串，像这样：<code>String str=&quot;HelloWorld&quot;</code>。或者使用String类的构造方法，像这样<code>String str=new String(&quot;HelloWorld&quot;)</code>。但是这两者在内存中有很大的区别。</p>
<ul>
<li><p>直接等于字符串String str&#x3D;”HelloWorld”</p>
<p>JVM中是先创建在常量池里创建了<code>&quot;HelloWorld&quot;</code>这个字符串，然后str存的就是这个字符串对象的地址，所以str实际上是这个字符串的引用。这个字符串只要被创建出来就不能被改变或者消失会一直存在。</p>
<p><img src="/2020/08/14/back-end/Java/JavaSE/String%E8%BF%9B%E9%98%B6/image-20200814212433752.png"></p>
<p>所以，如果另外一个字符串str2也直接等于<code>&quot;HelloWorld&quot;</code>，那么str和str2如果比较地址，那么他们两个是一样的（内容也一样）。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String str=<span class="string">&quot;Hello,World&quot;</span>;</span><br><span class="line">      String str2=<span class="string">&quot;Hello,World&quot;</span>;</span><br><span class="line">      System.out.println(str == str2);<span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<p>内存图：</p>
<p><img src="/2020/08/14/back-end/Java/JavaSE/String%E8%BF%9B%E9%98%B6/image-20200814212933713.png"></p>
<p>只要某个字符串被创建，他们它就会一直存在，不会消失。所以拼接字符串的时候，拼接两个字符串实际上会在常量池中创建3个字符串</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String str=<span class="string">&quot;Hello,World&quot;</span>+<span class="string">&quot;-&gt;Java&quot;</span>;<span class="comment">//&quot;Hello,World&quot;,&quot;-&gt;Java&quot;,&quot;Hello,World-&gt;Java&quot;</span></span><br></pre></td></tr></table></figure>

<p>内存图：</p>
<p><img src="/2020/08/14/back-end/Java/JavaSE/String%E8%BF%9B%E9%98%B6/image-20200814213431695.png"></p>
</li>
<li><p>使用构造方法String str&#x3D;new String(“HelloWorld”)</p>
<p>JVM中仍然是先在常量池中创建了字符串常量，然后new出来的String类型的对象存在堆中，然后栈中的str存的是刚刚new出来的String对象的内存地址。</p>
<p><img src="/2020/08/14/back-end/Java/JavaSE/String%E8%BF%9B%E9%98%B6/image-20200814214140123.png"></p>
<p>所以，如果两个通过new String出来的String对象通过比较的地址的方式比较是不相等的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;HelloWorld&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;HelloWorld&quot;</span>);</span><br><span class="line">System.out.println(str1 == str2);<span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<p>内存图：</p>
<p><img src="/2020/08/14/back-end/Java/JavaSE/String%E8%BF%9B%E9%98%B6/image-20200814214704778.png"></p>
</li>
</ul>
<p>总结：直接等于字符串的方式新建出来的是字符串常量，无法被改变，并且即使创建了一样的字符串，那么依旧是相等的。如果通过new String的方法new出来的字符串变量是指向堆中的String类对象的，即使字符串内容相等，但是对象不相等。所以字符串比较内容尽量中equals()方法比较。</p>
<h2 id="3、String类的构造方法"><a href="#3、String类的构造方法" class="headerlink" title="3、String类的构造方法"></a>3、String类的构造方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">String();								    <span class="comment">//空字符串</span></span><br><span class="line">String(<span class="type">byte</span>[] bytes); 						<span class="comment">//通过byte数组创建字符串</span></span><br><span class="line">String(<span class="type">byte</span>[] bytes, <span class="type">int</span> offset, <span class="type">int</span> length); <span class="comment">//offset是数组的第几个开始，length是长度</span></span><br><span class="line">String(<span class="type">char</span>[] value);						<span class="comment">//通过char数组创建字符串</span></span><br><span class="line">String(<span class="type">char</span>[] value, <span class="type">int</span> offset, <span class="type">int</span> count);  <span class="comment">//offset是数组的第几个开始，length是长度</span></span><br><span class="line">String(String original);					<span class="comment">//用String对象创建字符串</span></span><br><span class="line">String(StringBuffer buffer);				<span class="comment">//用StringBuffer创建字符串</span></span><br><span class="line">String(StringBuilder builder);				<span class="comment">//用StringBuilder创建字符串</span></span><br></pre></td></tr></table></figure>

<h2 id="4、String类的常用方法"><a href="#4、String类的常用方法" class="headerlink" title="4、String类的常用方法"></a>4、String类的常用方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> <span class="title function_">charAt</span><span class="params">(<span class="type">int</span> index)</span>;						<span class="comment">//返回指定索引的char值</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(String anotherString)</span>;		<span class="comment">//比较两个字符串（通过ASCII码）</span></span><br><span class="line">String <span class="title function_">concat</span><span class="params">(String str)</span>;					<span class="comment">//将str添加到该字符串末尾</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(CharSequence s)</span>;			<span class="comment">//判断该字符串是否包含字符串s</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">endsWith</span><span class="params">(String suffix)</span>;			<span class="comment">//判断该字符串是否以suffix字符串结尾</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object anObject)</span>;			<span class="comment">//将两个字符串进行比较</span></span><br><span class="line"><span class="type">byte</span>[] getBytes();							<span class="comment">//将该字符串转换为byte数组</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">indexOf</span><span class="params">(String str)</span>;					<span class="comment">//返回第一次出现str字符串的索引</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span>;							<span class="comment">//判断该字符串是否为空</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">lastIndexOf</span><span class="params">(String str)</span>;				<span class="comment">//返回最后一次出现str字符串的索引</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">length</span><span class="params">()</span>;								<span class="comment">//返回该字符串的长度</span></span><br><span class="line">String <span class="title function_">replace</span><span class="params">(String oldString, String newString)</span>;	<span class="comment">//将该字符串中的oldString字符替换成newString字符</span></span><br><span class="line">String[] split(String regex);				<span class="comment">//利用正则或者字符串来分割该字符串</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">startsWith</span><span class="params">(String prefix)</span>;			<span class="comment">//判断该字符串是否以prefix字符串开始</span></span><br><span class="line">String <span class="title function_">substring</span><span class="params">(<span class="type">int</span> beginIndex, <span class="type">int</span> endIndex)</span>;<span class="comment">//截取字符串从beginIndex开始到endIndex结束，endIndex默认是结尾</span></span><br><span class="line"><span class="type">char</span>[] toCharArray();						<span class="comment">//将该字符串转换为char数组</span></span><br><span class="line">String <span class="title function_">toLowerCase</span><span class="params">()</span>;						<span class="comment">//将字符串全部转换为小写</span></span><br><span class="line">String <span class="title function_">toUpperCase</span><span class="params">()</span>;						<span class="comment">//将字符串全部转换为大写</span></span><br><span class="line">String <span class="title function_">trim</span><span class="params">()</span>;								<span class="comment">//将前导或结尾的空字符串去掉</span></span><br></pre></td></tr></table></figure>

<h2 id="5、valueOf-方法"><a href="#5、valueOf-方法" class="headerlink" title="5、valueOf()方法"></a>5、valueOf()方法</h2><p>对象的valueOf( )方法可以将所有的基本数据类型转换为字符串类型，在<code>System.out.println( )</code>的底层其实也就是调用了对象的valueOf( )方法</p>
<h2 id="6、StringBuffer"><a href="#6、StringBuffer" class="headerlink" title="6、StringBuffer"></a>6、StringBuffer</h2><p>如果通过String类来拼接字符串的话，每次拼接都会创建新的字符串对象到常量池里，很浪费内存空间，所以<code>java.lang.StringBuffer</code>就是专门用来拼接字符串的，底层同样是char数组，但是没有final关键字修饰，所以它是可变的。默认的容量是16，可以通过构造方法来指定容量大小。底层是可扩容的，如果超过了大小就会自动扩容，同时是线程安全的，方法都有sychronized关键字修饰。</p>
<p>通过append( )方法来添加元素，每次添加都是到末尾，可以添加基本数据类型和Object类型等。执行append( )方法会调用String类的valueOf( )方法，然后valueOf( )方法又会调用类对象的toString方法，所以我们需要重写toString方法。 </p>
<p>通过insert(int index,Object o)向指定位置插入元素。</p>
<h2 id="7、StringBuilder"><a href="#7、StringBuilder" class="headerlink" title="7、StringBuilder"></a>7、StringBuilder</h2><p>跟StringBuffer差不多，但是线程不安全，方法都没有sychronized关键字修饰。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fangaoxs.github.io/2020/08/14/back-end/Java/JavaSE/String%E8%BF%9B%E9%98%B6/" data-id="clto66l5c001usck60cvg1ys7" data-title="String类进阶简单梳理" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-back-end/database/mysql进阶" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/08/11/back-end/database/mysql%E8%BF%9B%E9%98%B6/" class="article-date">
  <time class="dt-published" datetime="2020-08-11T07:30:39.000Z" itemprop="datePublished">2020-08-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/08/11/back-end/database/mysql%E8%BF%9B%E9%98%B6/">MySQL进阶简单梳理</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1、DB、DBMS、SQL分别是什么，他们之间存在什么联系？"><a href="#1、DB、DBMS、SQL分别是什么，他们之间存在什么联系？" class="headerlink" title="1、DB、DBMS、SQL分别是什么，他们之间存在什么联系？"></a>1、DB、DBMS、SQL分别是什么，他们之间存在什么联系？</h2><ul>
<li>DB：DataBase（数据库），数据库在硬盘上是以文件的形式存在的。</li>
<li>DBMS：DataBase Management System（数据库管理系统），比如：Oracle、MySQL、SqlServer…</li>
<li>SQL：Structured Query Language（结构化查询语言），是一门高级语言。SQL语句先由DBMS进行编译然后再执行。</li>
</ul>
<p>DBMS负责编译和执行SQL语句，然后操作DB。</p>
<h2 id="2、存储引擎"><a href="#2、存储引擎" class="headerlink" title="2、存储引擎"></a>2、存储引擎</h2><p>MySQL默认建表的时候的存储引擎是<code>InnoDB</code>；</p>
<p>在MySQL中叫<code>存储引擎</code>，在Oracle中叫<code>表的存储方式</code></p>
<p>MySQL常用的存储引擎有：</p>
<ol>
<li><p>MyISAM</p>
<p>一张表有三种格式文件组成：</p>
<ul>
<li>table_name.frm（表结构）</li>
<li>table_name.MYD（表数据）</li>
<li>table_name.MYI（表索引）</li>
</ul>
<p>优点：能够压缩，且可以只读，节省空间。</p>
<p>缺点：不支持事务。</p>
</li>
<li><p>InnoDB（默认）</p>
<p>表由table_name.frm（物理结构）组成的并且存储在tablespace表空间（逻辑结构）中</p>
<p>优点：支持事务、行级锁、外键。是安全的，支持级联删除、更新。支持事务的ACID原则。</p>
<p>Tip：ACID是指：</p>
<p><strong>原子性</strong>（atomicity）：要么全部提交成功，要么全部失败回滚。</p>
<p><strong>一致性</strong>（consistency）：一个事务在执行之前和执行之后，数据库都必须处于一致性状态。</p>
<p><strong>隔离性</strong>（isolation）：事务的隔离性是指在并发环境中，并发的事务时相互隔离的，一个事务的执行不能不被其他事务干扰。</p>
<p><strong>持久性</strong>（durability）：一旦事务提交，那么它对数据库中的对应数据的状态的变更就会永久保存到数据库中。</p>
</li>
<li><p>MEMORY（内存）</p>
<p>表由table_name.frm格式文件存储</p>
<p>存储在内存中</p>
<p>优点：查询效率特别高</p>
<p>缺点：不支持事务。数据容易丢失。</p>
</li>
</ol>
<h2 id="3、事务"><a href="#3、事务" class="headerlink" title="3、事务"></a>3、事务</h2><p>事务（Transaction）：一条事务就是一个完整的业务逻辑单元，不可以再分。</p>
<p>和事务相关的语句只有DML语句。（insert delete update）</p>
<p>事务机制：先开启事务机制，事务中执行了insert、update或者delete后不会立马修改文件，而是被记录到缓存和日志中，待事务结束（事务成功，删除缓存和日志并且提交修改到文件（commit）；事务失败，删除缓存和日志并且不提交修改到文件（rollback））</p>
<p>DQL（Data Quer yLanguage）：数据查询语言</p>
<p>DML（Data Manipulation Language）：数据操作语言</p>
<p>DDL（Data Definition Language）：数据定义语言</p>
<p>DCL（Data Control Language）：数据控制语言</p>
<p>事务的四种隔离级别：</p>
<p>读未提交（Read uncommitted）：A事务能够读到B事务还未提交的数据；如果B事务发生回滚则A事务会发生<strong>脏读</strong>（Dirty read）。</p>
<p>读已提交（Read committed）：A事务读B事务已经提交的数据。解决了脏读。但会发生<strong>不可重复读</strong>。SqlServer、Oracle的默认隔离级别是Read committed。</p>
<p>可重复读（Repeatable read）：B事务无论怎么改数据，A事务读到的永远是A事务并没有结束事务并且刚开始读到的数据。但是这个时候其实B事务已经改了数据了，A事务就会发生<strong>幻读</strong>。解决了不可重复读。</p>
<p>串行化（serializable）：所有事务按顺序执行。以上所有问题都被解决，但是<strong>效率低</strong>。</p>
<h2 id="4、数据库设计三范式"><a href="#4、数据库设计三范式" class="headerlink" title="4、数据库设计三范式"></a>4、数据库设计三范式</h2><p>设计范式：是为了减少设计表的时候出现数据冗余。</p>
<p>第一范式：任何一张表都应该有主键，并且每一个字段原子性不能再分。</p>
<p>第二范式：在第一范式的基础上，所有非主键字段完全依赖主键，不可产生部分依赖。（多对多，两张表，关系表，两外键）</p>
<p>第三范式：在第二范式的基础上，不能产生传递依赖。（一对多，多的表放外键）</p>
<p><strong>Tip</strong>：实际开发中，以满足客户需求为主，有时候会拿冗余换执行速度。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fangaoxs.github.io/2020/08/11/back-end/database/mysql%E8%BF%9B%E9%98%B6/" data-id="clto66l4f000fsck6f68c9jqg" data-title="MySQL进阶简单梳理" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-front-end/JavaScript/js小技巧/JavaScript小技巧" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/08/08/front-end/JavaScript/js%E5%B0%8F%E6%8A%80%E5%B7%A7/JavaScript%E5%B0%8F%E6%8A%80%E5%B7%A7/" class="article-date">
  <time class="dt-published" datetime="2020-08-08T07:30:39.000Z" itemprop="datePublished">2020-08-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/08/08/front-end/JavaScript/js%E5%B0%8F%E6%8A%80%E5%B7%A7/JavaScript%E5%B0%8F%E6%8A%80%E5%B7%A7/">JavaScript小技巧</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1、严格检查格式"><a href="#1、严格检查格式" class="headerlink" title="1、严格检查格式"></a>1、严格检查格式</h2><p>在js的代码头加上这个就开启严格检查模式（ES6新语法），前提是浏览器支持ES6语法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>开启之后在js代码块里就必须严格使用规范来书写代码，比如代码行使用分号。</p>
<h2 id="2、字符串"><a href="#2、字符串" class="headerlink" title="2、字符串"></a>2、字符串</h2><h3 id="2-1多行字符串"><a href="#2-1多行字符串" class="headerlink" title="2.1多行字符串"></a>2.1多行字符串</h3><p>利用键盘<code>tab</code>上的&#96;&#96; &#96;（反引号）包裹起来可以输出多行字符串</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> msg=</span><br><span class="line">    <span class="string">`</span></span><br><span class="line"><span class="string">    测试</span></span><br><span class="line"><span class="string">    多行</span></span><br><span class="line"><span class="string">    字符</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br></pre></td></tr></table></figure>

<h3 id="2-2字符串模板"><a href="#2-2字符串模板" class="headerlink" title="2.2字符串模板"></a>2.2字符串模板</h3><p>在字符串里利用<code>$&#123;xxx&#125;</code>可以输出定义好的变量</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> name=<span class="string">&#x27;测试&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> age=<span class="number">18</span>;</span><br><span class="line"><span class="keyword">let</span> msg=<span class="string">`你好！<span class="subst">$&#123;name&#125;</span>,年龄：<span class="subst">$&#123;age&#125;</span>`</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br></pre></td></tr></table></figure>

<h3 id="2-3字符串长度"><a href="#2-3字符串长度" class="headerlink" title="2.3字符串长度"></a>2.3字符串长度</h3><p>利用str.length可以获得字符串的长度</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> str=<span class="string">&#x27;abcdefg&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="property">length</span>);			<span class="comment">//7</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4字符串的常用方法"><a href="#2-4字符串的常用方法" class="headerlink" title="2.4字符串的常用方法"></a>2.4字符串的常用方法</h3><ol>
<li><p>toLowerCase()：将字符串全部转为小写。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> msg=<span class="string">&#x27;abcdefGHI&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将所有字符转为小写</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(msg.<span class="title function_">toLowerCase</span>());<span class="comment">//abcdefghi</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>toUpperCase()：将所有字符串全部转为大写。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> msg=<span class="string">&#x27;abcdefGHI&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将所有字符转为大写</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(msg.<span class="title function_">toUpperCase</span>());<span class="comment">//ABCDEFGHI</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>charAt(number)：返回指定下标位置的字符。如果index不再0-str.length则返回<strong>空字符串</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> msg=<span class="string">&#x27;abcdefGHI&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出下标为6的字符</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(msg.<span class="title function_">charAt</span>(<span class="number">6</span>));<span class="comment">//G</span></span><br><span class="line"><span class="comment">//等价于msg.charAt(6)</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(msg[<span class="number">6</span>]);<span class="comment">//G</span></span><br><span class="line"><span class="comment">//超出范围</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(msg.<span class="title function_">charAt</span>(<span class="number">10</span>));<span class="comment">//  (空字符串)</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>charCodeAt(number)：返回指定下标位置的unicode编码，范围是0~65535。</p>
<p>如果index不在0-str.length(不包含str.length)之间，返回NaN</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> msg=<span class="string">&#x27;abcdefGHI&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出下标为6的字符的unicode码</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(msg.<span class="title function_">charCodeAt</span>(<span class="number">6</span>));<span class="comment">//71</span></span><br><span class="line"><span class="comment">//超出范围，输出NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(msg.<span class="title function_">charCodeAt</span>(-<span class="number">1</span>));<span class="comment">//NaN</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>indexOf(string,number)：查询指定字符string在字符串中第一次出现的下标，number（可选）指定从第几个字符查起</p>
<p><strong>Tip</strong>：string大小写敏感</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> msg=<span class="string">&#x27;abcdefGHI&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//b在字符串中第一次出现的下标</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(msg.<span class="title function_">indexOf</span>(<span class="string">&#x27;d&#x27;</span>));<span class="comment">//3</span></span><br><span class="line"><span class="comment">//从第二个字符开始，b在字符串中第一次出现的下标</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(msg.<span class="title function_">indexOf</span>(<span class="string">&#x27;d&#x27;</span>,<span class="number">2</span>));<span class="comment">//3</span></span><br><span class="line"><span class="comment">//没有该字符则返回-1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(msg.<span class="title function_">indexOf</span>(<span class="string">&#x27;k&#x27;</span>));<span class="comment">//-1</span></span><br></pre></td></tr></table></figure>

<p>注意第二个方法只是提供从哪个下标开始检索提高检索速度，而不改变检索出来的结果下标。</p>
</li>
<li><p>lastIndexOf(string,number)：查询指定字符string在字符串中最后一次出现的下标，number（）</p>
<p><strong>Tip</strong>：倒着检索</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str=<span class="string">&#x27;abcdefgdfg&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//d字符在字符串中最后一次出现的下标</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;d&#x27;</span>));<span class="comment">//7</span></span><br><span class="line"><span class="comment">//从第二个字符开始检索，d在字符串中最后一次出现的下标</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;d&#x27;</span>,str.<span class="property">length</span>));<span class="comment">//7</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>slice()：提取字符串两个下标间的字符</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str=<span class="string">&#x27;Hello,World!&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//提取字符串两个下标之间的字符，2~最后一个</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">slice</span>(<span class="number">2</span>));<span class="comment">//llo,World!</span></span><br><span class="line"><span class="comment">//2~2是空串</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">slice</span>(<span class="number">2</span>,<span class="number">2</span>));<span class="comment">// (空字符串)</span></span><br><span class="line"><span class="comment">//取下标2到5，不包括5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">slice</span>(<span class="number">2</span>,<span class="number">5</span>));<span class="comment">//llo</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>substring()：提取指定长度的字符串</p>
<p><strong>Tip</strong>：和slice()用法一样</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str=<span class="string">&#x27;Hello,World!&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//提取从下标2开始的所有字符</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">substring</span>(<span class="number">2</span>));<span class="comment">//llo,World!</span></span><br><span class="line"><span class="comment">//提取从下标2开始到5的字符</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">substring</span>(<span class="number">2</span>,<span class="number">5</span>));<span class="comment">//llo</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>？substr()：返回从指定下标开始指定长度的的子字符串</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str=<span class="string">&#x27;Hello,World!&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//提取从下标2开始到末尾的所有字符</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">substr</span>(<span class="number">2</span>));<span class="comment">//llo,World!</span></span><br><span class="line"><span class="comment">//提取从下标2开始，长度为5的字符串</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">substr</span>(<span class="number">2</span>,<span class="number">5</span>))<span class="comment">//llo,W</span></span><br><span class="line"><span class="comment">//从倒数第2个开始，长度为5的字符串</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">substr</span>(-<span class="number">2</span>,<span class="number">5</span>))<span class="comment">//d!</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>split()：把字符串分割成字符串数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> string=<span class="string">&#x27;45+741+87-413&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//以空字符串&#x27;&#x27;分割string字符串</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(string.<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>));<span class="comment">//[&quot;4&quot;, &quot;5&quot;, &quot;+&quot;, &quot;7&quot;, &quot;4&quot;, &quot;1&quot;, &quot;+&quot;, &quot;8&quot;, &quot;7&quot;, &quot;-&quot;, &quot;4&quot;, &quot;1&quot;, &quot;3&quot;]</span></span><br><span class="line"><span class="comment">//以&#x27;+&#x27;分割string字符串</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(string.<span class="title function_">split</span>(<span class="string">&#x27;+&#x27;</span>));<span class="comment">//[&quot;45&quot;, &quot;741&quot;, &quot;87-413&quot;]</span></span><br><span class="line"><span class="comment">//以&#x27;-&#x27;分割string字符串</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(string.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>));<span class="comment">//[&quot;45+741+87&quot;, &quot;413&quot;]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>replace()：用另外的字符串替换原有字符串中字符</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str=<span class="string">&#x27;Hello,World!&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//把字符串中的o替换成**</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">replace</span>(<span class="string">&#x27;o&#x27;</span>,<span class="string">&#x27;**&#x27;</span>));<span class="comment">//Hell**,World!</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>match()：返回所有查找的关键字内容的数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str=<span class="string">&#x27;Hello,World!hello&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//正则表达式，匹配hello字符串，i表示不区分大小写，g表示全局查找</span></span><br><span class="line"><span class="keyword">let</span> regExp=<span class="regexp">/hello/ig</span>;</span><br><span class="line"><span class="comment">//用正则表达式匹配字符串</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">match</span>(regExp));<span class="comment">//[&quot;Hello&quot;, &quot;hello&quot;]</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="3、数组"><a href="#3、数组" class="headerlink" title="3、数组"></a>3、数组</h2><h3 id="3-1-可以包含任意元素"><a href="#3-1-可以包含任意元素" class="headerlink" title="3.1 可以包含任意元素"></a>3.1 可以包含任意元素</h3><p>array可以包含任意对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array= [<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;字符串&#x27;</span>,<span class="number">123</span>,<span class="literal">false</span>];</span><br></pre></td></tr></table></figure>

<h3 id="3-2-数组长度"><a href="#3-2-数组长度" class="headerlink" title="3.2 数组长度"></a>3.2 数组长度</h3><p>可以通过<code>array.length</code>改变数组长度，如果是扩容，空元素用undefined补齐，如果是减容，那么元素会丢失。</p>
<h3 id="3-3-常用方法"><a href="#3-3-常用方法" class="headerlink" title="3.3 常用方法"></a>3.3 常用方法</h3><ol>
<li><p>indexOf()：查询指定字符string在字符串中第一次出现的下标</p>
</li>
<li><p>slice()：提取字符串两个下标间的字符</p>
</li>
<li><p>push()：向数组尾部添加元素（类似压栈）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array= [<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;D&#x27;</span>,<span class="string">&#x27;F&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//向数组尾部添加&#x27;G&#x27;字符</span></span><br><span class="line">array.<span class="title function_">push</span>(<span class="string">&#x27;G&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array);<span class="comment">//[&quot;A&quot;, &quot;B&quot;, &quot;D&quot;, &quot;F&quot;, &quot;G&quot;]</span></span><br><span class="line"><span class="comment">//向数组尾部添加&#x27;H&#x27;,&#x27;J&#x27;字符</span></span><br><span class="line">array.<span class="title function_">push</span>(<span class="string">&#x27;H&#x27;</span>,<span class="string">&#x27;J&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array);<span class="comment">//[&quot;A&quot;, &quot;B&quot;, &quot;D&quot;, &quot;F&quot;, &quot;G&quot;, &quot;H&quot;, &quot;J&quot;]</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>pop()：从数组尾部减少元素（类似出栈）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array= [<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;D&#x27;</span>,<span class="string">&#x27;F&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//从数组尾部减去字符</span></span><br><span class="line">array.<span class="title function_">pop</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array);<span class="comment">//[&quot;A&quot;, &quot;B&quot;, &quot;D&quot;]</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>unshift()：向数组头部添加元素</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array= [<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;D&#x27;</span>,<span class="string">&#x27;F&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//向数组头部添加&#x27;G&#x27;字符</span></span><br><span class="line">array.<span class="title function_">unshift</span>(<span class="string">&#x27;G&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array);<span class="comment">//[&quot;G&quot;, &quot;A&quot;, &quot;B&quot;, &quot;D&quot;, &quot;F&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//向数组头部添加&#x27;H&#x27;,&#x27;J&#x27;字符</span></span><br><span class="line">array.<span class="title function_">unshift</span>(<span class="string">&#x27;H&#x27;</span>,<span class="string">&#x27;J&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array);<span class="comment">//[&quot;H&quot;, &quot;J&quot;, &quot;G&quot;, &quot;A&quot;, &quot;B&quot;, &quot;D&quot;, &quot;F&quot;]</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>shift()：从数组头部减少元素</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array= [<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;D&#x27;</span>,<span class="string">&#x27;F&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//从数组头部减去字符</span></span><br><span class="line">array.<span class="title function_">shift</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array);<span class="comment">//[&quot;B&quot;, &quot;D&quot;, &quot;F&quot;]</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>sort()：数组排序</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array= [<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;D&#x27;</span>,<span class="string">&#x27;F&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//数组排序</span></span><br><span class="line">array.<span class="title function_">sort</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array);<span class="comment">//[&quot;A&quot;, &quot;B&quot;, &quot;D&quot;, &quot;F&quot;]</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>reverse()：数组元素反转</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array= [<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;F&#x27;</span>,<span class="string">&#x27;D&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//数组元素反转</span></span><br><span class="line">array.<span class="title function_">reverse</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array);<span class="comment">//[&quot;D&quot;, &quot;F&quot;, &quot;B&quot;, &quot;A&quot;]</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>concat()：拼接数组并返回新数组</p>
<p>并不会修改原数组，只是返回一个新数组，打印array发现数组并没有发生变化</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array= [<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;F&#x27;</span>,<span class="string">&#x27;D&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array.<span class="title function_">concat</span>(<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>));<span class="comment">//[&quot;A&quot;, &quot;B&quot;, &quot;F&quot;, &quot;D&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array);<span class="comment">//[&quot;A&quot;, &quot;B&quot;, &quot;F&quot;, &quot;D&quot;]</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="4、对象"><a href="#4、对象" class="headerlink" title="4、对象"></a>4、对象</h2><h3 id="4-1-定于对象"><a href="#4-1-定于对象" class="headerlink" title="4.1 定于对象"></a>4.1 定于对象</h3><p>js也是一门面向对象的编程语言，所以我们也可以定义对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> student=&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;测试&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">score</span>: <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span>/<span class="keyword">let</span> 对象名=&#123;</span><br><span class="line">    属性名：值,</span><br><span class="line">    属性名：值,</span><br><span class="line">    属性名：值</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对象用<code>&#123;&#125;</code>括起来，里面对于属性名和属性值，类似key-value键值对。</p>
<p><strong>Tip：</strong>JS里对象的键都是字符串，值可以是任意类型</p>
<h3 id="4-2-对象赋值"><a href="#4-2-对象赋值" class="headerlink" title="4.2 对象赋值"></a>4.2 对象赋值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//给student的score赋值为100</span></span><br><span class="line">student.<span class="property">score</span>=<span class="number">100</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(student);<span class="comment">//&#123;name: &quot;测试&quot;, age: 3, score: 100&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-3-动态添加对象元素"><a href="#4-3-动态添加对象元素" class="headerlink" title="4.3 动态添加对象元素"></a>4.3 动态添加对象元素</h3><p>直接给给想要新增的属性赋值就好了</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//给student新增class属性</span></span><br><span class="line">student.<span class="property">class</span>=<span class="number">1</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(student);<span class="comment">//&#123;name: &quot;测试&quot;, age: 3, score: 100, class: 1&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-4-动态删除对象中元素"><a href="#4-4-动态删除对象中元素" class="headerlink" title="4.4 动态删除对象中元素"></a>4.4 动态删除对象中元素</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除student的name属性</span></span><br><span class="line"><span class="keyword">delete</span> student.<span class="property">name</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(student);<span class="comment">//&#123;age: 3, score: 0&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-5-判断对象中是否含有某属性"><a href="#4-5-判断对象中是否含有某属性" class="headerlink" title="4.5 判断对象中是否含有某属性"></a>4.5 判断对象中是否含有某属性</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;name&#x27;</span> <span class="keyword">in</span> student);<span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;test&#x27;</span> <span class="keyword">in</span> student);<span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<h2 id="5、Map和Set集合"><a href="#5、Map和Set集合" class="headerlink" title="5、Map和Set集合"></a>5、Map和Set集合</h2><p>Map和Set集合是ES的新特性。同样的，Map集合也是以key-value键值对的方式存储，key无序也不可重复；Set集合是无序且不可重复的</p>
<h3 id="5-1-Map"><a href="#5-1-Map" class="headerlink" title="5.1 Map"></a>5.1 Map</h3><ol>
<li><p>定义Map集合对象</p>
<p>同样的，跟Java类似也是采用key-value键值对的方式存储</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map=<span class="keyword">new</span> <span class="title class_">Map</span>([</span><br><span class="line">    [<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;测试&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;age&#x27;</span>,<span class="number">5</span>],</span><br><span class="line">    [<span class="string">&#x27;score&#x27;</span>,<span class="number">100</span>]</span><br><span class="line">]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map);<span class="comment">//&#123;&quot;name&quot; =&gt; &quot;测试&quot;, &quot;age&quot; =&gt; 5, &quot;score&quot; =&gt; 100&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>通过key获得value</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过key得到value，key是string类型</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">get</span>(<span class="string">&#x27;name&#x27;</span>));<span class="comment">//测试</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>删除元素</p>
<p>js里面是delete()，类似java里面的remove()</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">map.<span class="title function_">delete</span>(<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map);<span class="comment">//&#123;&quot;age&quot; =&gt; 5, &quot;score&quot; =&gt; 100&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>增加或者修改元素</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//增加元素class</span></span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&#x27;class&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map);<span class="comment">//&#123;&quot;name&quot; =&gt; &quot;测试&quot;, &quot;age&quot; =&gt; 5, &quot;score&quot; =&gt; 100, &quot;class&quot; =&gt; 1&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//修改元素name</span></span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;管理员&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map);<span class="comment">//&#123;&quot;name&quot; =&gt; &quot;管理员&quot;, &quot;age&quot; =&gt; 5, &quot;score&quot; =&gt; 100, &quot;class&quot; =&gt; 1&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>集合大小</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">map.<span class="property">size</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>判断集合中是否包含元素</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//判断集合中是否包含元素</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">has</span>(<span class="string">&#x27;name&#x27;</span>));<span class="comment">//true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>遍历Map集合</p>
<p>因为map的keys()方法可以得到所有key的集合然后通过key来获得value</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//利用for(let i of 集合)的方式遍历</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> map)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过map.keys()方法得到所有的key的集合</span></span><br><span class="line"><span class="keyword">let</span> keys=map.<span class="title function_">keys</span>();</span><br><span class="line"><span class="comment">//遍历key集合</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> keys) &#123;</span><br><span class="line">    <span class="comment">//通过查询key的方式得到value</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">get</span>(key));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>遍历Set集合</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">7</span>]);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> set) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="6、函数"><a href="#6、函数" class="headerlink" title="6、函数"></a>6、函数</h2><h3 id="6-1-定义函数的两种方式"><a href="#6-1-定义函数的两种方式" class="headerlink" title="6.1 定义函数的两种方式"></a>6.1 定义函数的两种方式</h3><ol>
<li><pre><code class="js">function 函数名(参数列表) &#123;
    return 返回值;
&#125;

//返回value的相反数
function f(value) &#123;
    return -value;
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2. ```js</span><br><span class="line">   var 函数名=function (参数列表)&#123;</span><br><span class="line">       return 返回值;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   //返回value的相反数</span><br><span class="line">   var f=function (value) &#123;</span><br><span class="line">       return -value;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ol>
<h3 id="6-2-arguments"><a href="#6-2-arguments" class="headerlink" title="6.2 arguments"></a>6.2 arguments</h3><p>arguments可以获得函数接收到的所有参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">arguments</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//f函数实际上只需要第一个参数</span></span><br><span class="line"><span class="title function_">f</span>(<span class="number">5</span>,<span class="number">41</span>,<span class="number">8</span>,<span class="number">9</span>);</span><br></pre></td></tr></table></figure>



<h3 id="6-3-rest"><a href="#6-3-rest" class="headerlink" title="6.3 rest"></a>6.3 rest</h3><p>rest（自定义）可以获得函数接收的除了需要用的参数以外的参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params">value,...rest</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; rest.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(rest[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">f1</span>(<span class="number">5</span>,<span class="number">41</span>,<span class="number">8</span>,<span class="number">9</span>);</span><br></pre></td></tr></table></figure>

<h3 id="6-4-作用域"><a href="#6-4-作用域" class="headerlink" title="6.4 作用域"></a>6.4 作用域</h3><p>尽量在头部就定义所有的变量，提高代码可维护性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> y=<span class="number">5</span>;</span><br><span class="line"><span class="keyword">var</span> z=<span class="number">10</span>;</span><br></pre></td></tr></table></figure>



<p>在js里，基本上所有的变量或者函数都会被存放到window对象里，为了尽量避免与他人的代码冲突，所以强烈建议自定义一个唯一的全局变量，再通过全局变量来定义变量或者函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义唯一的全局变量</span></span><br><span class="line"><span class="keyword">var</span> <span class="variable constant_">YK</span>=&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义唯一的全局变量的函数</span></span><br><span class="line"><span class="variable constant_">YK</span>.<span class="property">add</span>=<span class="keyword">function</span> (<span class="params">a,b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a+b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">YK</span>.<span class="title function_">add</span>(<span class="number">10</span>,<span class="number">5</span>));<span class="comment">//15</span></span><br></pre></td></tr></table></figure>

<h3 id="6-5-方法"><a href="#6-5-方法" class="headerlink" title="6.5 方法"></a>6.5 方法</h3><p>在对象里面定义函数就是方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义</span></span><br><span class="line"><span class="keyword">var</span> student=&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;测试&#x27;</span>,</span><br><span class="line">    <span class="attr">birthday</span>: <span class="number">1998</span>,</span><br><span class="line">    <span class="comment">//在对象里面定义函数就是方法</span></span><br><span class="line">    <span class="attr">age</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> age;</span><br><span class="line">        <span class="comment">//用当前日期减去birthday就是年龄</span></span><br><span class="line">        age=<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getFullYear</span>()-<span class="variable language_">this</span>.<span class="property">birthday</span>;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用属性</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(student.<span class="property">name</span>);<span class="comment">//测试</span></span><br><span class="line"><span class="comment">//调用方法</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(student.<span class="title function_">age</span>());<span class="comment">//22</span></span><br></pre></td></tr></table></figure>

<h2 id="7、Date对象"><a href="#7、Date对象" class="headerlink" title="7、Date对象"></a>7、Date对象</h2><p>Date如同Java中的日期对象一样，可以获得当前的时间</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义date对象</span></span><br><span class="line"><span class="keyword">var</span> date=<span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(date);<span class="comment">//Fri Aug 07 2020 12:30:10 GMT+0800 (中国标准时间)</span></span><br><span class="line"><span class="comment">//年</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(date.<span class="title function_">getFullYear</span>());<span class="comment">//2020</span></span><br><span class="line"><span class="comment">//月</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(date.<span class="title function_">getMonth</span>());<span class="comment">//7   0~11</span></span><br><span class="line"><span class="comment">//日</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(date.<span class="title function_">getDate</span>());<span class="comment">//7</span></span><br><span class="line"><span class="comment">//星期几</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(date.<span class="title function_">getDay</span>());<span class="comment">//5</span></span><br><span class="line"><span class="comment">//时</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(date.<span class="title function_">getHours</span>());<span class="comment">//12</span></span><br><span class="line"><span class="comment">//分</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(date.<span class="title function_">getMinutes</span>());<span class="comment">//30</span></span><br><span class="line"><span class="comment">//秒</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(date.<span class="title function_">getSeconds</span>());<span class="comment">//10</span></span><br><span class="line"><span class="comment">//当前时间的时间戳</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(date.<span class="title function_">getTime</span>());<span class="comment">//1596791875863</span></span><br></pre></td></tr></table></figure>

<h2 id="8、JSON对象"><a href="#8、JSON对象" class="headerlink" title="8、JSON对象"></a>8、JSON对象</h2><p>JSON是一种轻量级数据交换格式</p>
<ol>
<li><p>JS对象-&gt;JSON字符串对象</p>
<p>利用<code>JSON.stringify()</code>方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//JS对象</span></span><br><span class="line"><span class="keyword">var</span> user=&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;用户&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">class</span>: <span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user);<span class="comment">//&#123;name: &quot;用户&quot;, age: 10, class: 1&#125;</span></span><br><span class="line"><span class="comment">//将JS对象转换为JSON字符串对象</span></span><br><span class="line"><span class="keyword">var</span> jsonUser = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(user);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(jsonUser);<span class="comment">//&#123;&quot;name&quot;:&quot;用户&quot;,&quot;age&quot;:10,&quot;class&quot;:1&#125;</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>JSON字符串对象-&gt;JS对象</p>
<p>利用<code>JSON.parse()</code>方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//JSON字符串对象转换为JS对象</span></span><br><span class="line"><span class="keyword">var</span> user = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="string">&#x27;&#123;&quot;name&quot;:&quot;用户&quot;,&quot;age&quot;:10,&quot;class&quot;:1&#125;&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user);<span class="comment">//&#123;name: &quot;用户&quot;, age: 10, class: 1&#125;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>注意JS对象和JSON字符串对象的区别：</p>
<p>JS对象里其实不仅仅包含了这几个键值对，实际上还有许多方法，但是JSON对象就仅仅是字符串，所以键值对都是用引号括起来的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">js对象：&#123;<span class="attr">name</span>: <span class="string">&quot;用户&quot;</span>, <span class="attr">age</span>: <span class="number">10</span>, <span class="attr">class</span>: <span class="number">1</span>&#125;</span><br><span class="line"><span class="title class_">JSON</span>对象：&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;用户&quot;</span>,<span class="string">&quot;age&quot;</span>:<span class="number">10</span>,<span class="string">&quot;class&quot;</span>:<span class="number">1</span>&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9、面向对象编程"><a href="#9、面向对象编程" class="headerlink" title="9、面向对象编程"></a>9、面向对象编程</h2><p>js同样是一门面向对象编程的编程语言。</p>
<ol>
<li><p>利用class定义类模板</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//User类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//构造器</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name,age</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span>=name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span>=age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//方法</span></span><br><span class="line">    <span class="title function_">print</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);<span class="comment">//打印name</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">age</span>);<span class="comment">//打印age</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过类定义对象</span></span><br><span class="line"><span class="keyword">var</span> user = <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&#x27;用户&#x27;</span>,<span class="number">20</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user);<span class="comment">//User &#123;name: &quot;用户&quot;, age: 20&#125;</span></span><br><span class="line"><span class="comment">//调用user类对象的print方法</span></span><br><span class="line">user.<span class="title function_">print</span>();<span class="comment">//用户   20</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>使用extends关键字继承</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_ inherited__">User</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//构造器</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">studentId</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>();<span class="comment">//调用父类构造器</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">studentId</span>=studentId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重写了父类的print方法</span></span><br><span class="line">    <span class="title function_">print</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Student类&#x27;</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">studentId</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> student = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">2</span>);</span><br><span class="line"><span class="comment">//调用student类对象的print方法</span></span><br><span class="line">student.<span class="title function_">print</span>();</span><br></pre></td></tr></table></figure>

<p><strong>Tip：</strong>切记子类继承父类的构造器必须要使用<code>super()</code>调用父类的构造器才行，在Java里面是可以省略的，但是js里不可以省略。</p>
</li>
</ol>
<h2 id="10、操作BOM对象"><a href="#10、操作BOM对象" class="headerlink" title="10、操作BOM对象"></a>10、操作BOM对象</h2><ol>
<li><p>&#x3D;&#x3D;window对象&#x3D;&#x3D;</p>
<p>可以获得当前浏览器窗口对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//window对象</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">alert</span>();<span class="comment">//弹窗</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">confirm</span>();<span class="comment">//确认信息框</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">print</span>();<span class="comment">//弹出打印对话框</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">innerHeight</span>;<span class="comment">//浏览器内框高</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">innerWidth</span>;<span class="comment">//浏览器内裤宽</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">outerHeight</span>;<span class="comment">//浏览器外框高</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">outerWidth</span>;<span class="comment">//浏览器外框宽</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>&#x3D;&#x3D;location对象&#x3D;&#x3D;</p>
<p>可以获得关于url的对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//location对象</span></span><br><span class="line">location.<span class="property">host</span>;<span class="comment">//当前url的域名和端口号</span></span><br><span class="line">location.<span class="property">hostname</span>;<span class="comment">//当前url的域名</span></span><br><span class="line">location.<span class="property">protocol</span>;<span class="comment">//当前url使用的协议</span></span><br><span class="line">location.<span class="title function_">assign</span>(url);<span class="comment">//导航到url</span></span><br><span class="line">location.<span class="title function_">reload</span>();<span class="comment">//刷鞋该页面</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>navigator对象</p>
<p>可以获得浏览器信息对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//navigator浏览器信息对象</span></span><br><span class="line">navigator.<span class="property">appName</span>;<span class="comment">//浏览器名称</span></span><br><span class="line">navigator.<span class="property">appVersion</span>;<span class="comment">//浏览器版本号</span></span><br><span class="line">navigator.<span class="property">appCodeName</span>;<span class="comment">//浏览器内核名称</span></span><br><span class="line">navigator.<span class="property">userAgent</span>;<span class="comment">//用户代理字符串</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>screen对象</p>
<p>屏幕尺寸</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">screen.<span class="property">width</span>;<span class="comment">//屏幕宽度</span></span><br><span class="line">screen.<span class="property">height</span>;<span class="comment">//屏幕高度</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>history对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//history对象</span></span><br><span class="line">history.<span class="title function_">forward</span>();<span class="comment">//前进</span></span><br><span class="line">history.<span class="title function_">back</span>();<span class="comment">//后退</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="11、操作DOM对象（重点）"><a href="#11、操作DOM对象（重点）" class="headerlink" title="11、操作DOM对象（重点）"></a>11、操作DOM对象（重点）</h2><p>DOM：文档对象模型</p>
<p>DOM树就是指html网页的标签的层级关系像树一样：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/firstJavaScript.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>p1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;p2&quot;</span>&gt;</span>p2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这段代码用DOM树画出来大致就是：</p>
<p><img src="/2020/08/08/front-end/JavaScript/js%E5%B0%8F%E6%8A%80%E5%B7%A7/JavaScript%E5%B0%8F%E6%8A%80%E5%B7%A7/image-20200807223311396.png"></p>
<p>操作DOM节点的话大致就分以下4个核心，对DOM节点的增删改查</p>
<ol>
<li><p>查询DOM节点</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获得DOM节点</span></span><br><span class="line"><span class="keyword">var</span> h1 = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;h1&#x27;</span>);   <span class="comment">//获得标签名为h1的节点</span></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;p1&#x27;</span>);         <span class="comment">//获得id为p1的节点</span></span><br><span class="line"><span class="keyword">var</span> p2 = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;p2&#x27;</span>); <span class="comment">//获得class为p2的节点</span></span><br><span class="line"><span class="keyword">var</span> father = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box&#x27;</span>);    <span class="comment">//获得父节点</span></span><br><span class="line"><span class="keyword">var</span> children = father.<span class="property">children</span>;                 <span class="comment">//通过父节点得到子节点</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>删除DOM节点，删除DOM需通过父节点来删除</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、获得想要删除的节点</span></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;p1&#x27;</span>);</span><br><span class="line"><span class="comment">//2、获得想要删除的节点的父节点</span></span><br><span class="line"><span class="keyword">var</span> parent = p1.<span class="property">parentElement</span>;</span><br><span class="line"><span class="comment">//3、调用父节点的remove()方法删除节点</span></span><br><span class="line">parent.<span class="title function_">removeChild</span>(p1);</span><br></pre></td></tr></table></figure>


</li>
<li><p>更新DOM节点</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//先获得节点</span></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;p1&#x27;</span>);</span><br><span class="line">   </span><br><span class="line"><span class="comment">//修改文本</span></span><br><span class="line">p1.<span class="property">innerText</span>=<span class="string">&#x27;修改后的文本&#x27;</span>;<span class="comment">//动态修改文本</span></span><br><span class="line">p1.<span class="property">innerHTML</span>=<span class="string">&#x27;&lt;h2&gt;标题2&lt;/h2&gt;&#x27;</span>;<span class="comment">//动态修改成超本文(HTML)</span></span><br><span class="line">   </span><br><span class="line"><span class="comment">//修改css</span></span><br><span class="line">p1.<span class="property">style</span>.<span class="property">color</span>=<span class="string">&#x27;red&#x27;</span>;<span class="comment">//修改color为red</span></span><br><span class="line">p1.<span class="property">style</span>.<span class="property">fontSize</span>=<span class="string">&#x27;50px&#x27;</span>;<span class="comment">//修改字体大小为50px</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>增加DOM节点</p>
<ol>
<li><p>移动已有的标签的位置</p>
<p>我想要把p3移动到p2的下面</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p3&quot;</span>&gt;</span>p3<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>p1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;p2&quot;</span>&gt;</span>p2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//1、获得想要移动的节点</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> p3 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;p3&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//2、获得想要移动到的目标位置的父节点</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//3、父节点调用appendChild()方法将p3移动到box下面</span></span></span><br><span class="line"><span class="language-javascript">    box.<span class="title function_">appendChild</span>(p3);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2020/08/08/front-end/JavaScript/js%E5%B0%8F%E6%8A%80%E5%B7%A7/JavaScript%E5%B0%8F%E6%8A%80%E5%B7%A7/image-20200808121305308.png" alt="image-20200808121305308"></p>
</li>
<li><p>创建新的节点并插入</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>p1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;p2&quot;</span>&gt;</span>p2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//1、创建新的节点（标签名）</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> p3 = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;p&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//2、给刚创建的标签赋id</span></span></span><br><span class="line"><span class="language-javascript">    p3.<span class="title function_">setAttribute</span>(<span class="string">&#x27;id&#x27;</span>,<span class="string">&#x27;p3&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//3、给创建的节点赋文字</span></span></span><br><span class="line"><span class="language-javascript">    p3.<span class="property">innerText</span>=<span class="string">&#x27;新创建的p3&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//4、获得想要插入的位置的节点</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//5、将刚创建的节点放到box节点的子节点</span></span></span><br><span class="line"><span class="language-javascript">    box.<span class="title function_">appendChild</span>(p3);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2020/08/08/front-end/JavaScript/js%E5%B0%8F%E6%8A%80%E5%B7%A7/JavaScript%E5%B0%8F%E6%8A%80%E5%B7%A7/image-20200808122314537.png" alt="image-20200808122314537"></p>
</li>
<li><p>setAttribute(key,value)</p>
<p>节点的setAttribute()方法是利用键值对的方式设置参数的，有点万能，甚至还可以新建css标签和script标签</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>p1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;p2&quot;</span>&gt;</span>p2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//1、创建script标签</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> myScript = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//2、给script标签赋值</span></span></span><br><span class="line"><span class="language-javascript">    myScript.<span class="title function_">setAttribute</span>(<span class="string">&#x27;src&#x27;</span>,<span class="string">&#x27;js/firstJavaScript.js&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//3、将script标签追加到head后面</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;head&#x27;</span>)[<span class="number">0</span>].<span class="title function_">appendChild</span>(myScript);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>就实现了等价于下面一样的效果</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/firstJavaScript.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="12、表单"><a href="#12、表单" class="headerlink" title="12、表单"></a>12、表单</h2><h3 id="12-1-使用MD5加密算法加密密码"><a href="#12-1-使用MD5加密算法加密密码" class="headerlink" title="12.1 使用MD5加密算法加密密码"></a>12.1 使用MD5加密算法加密密码</h3><ol>
<li><p>引入在线cdn的md5的js</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>通过绑定按钮事件执行函数</p>
<p>button按钮绑定了submit()函数</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dialog-from-label&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>用户名：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">id</span>=<span class="string">&quot;userName&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>密码：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;passWord&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;submit()&quot;</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>函数中进行加密算法</p>
<p>md5()就是刚刚引入的js里面的内置方法</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">submit</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//获得用户名标签</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> userName = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;userName&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//获得密码标签</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> passWord = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;passWord&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//用md5进行加密</span></span></span><br><span class="line"><span class="language-javascript">        passWord.<span class="property">value</span>=<span class="title function_">md5</span>(passWord.<span class="property">value</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(userName.<span class="property">value</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(passWord.<span class="property">value</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="12、jQuery"><a href="#12、jQuery" class="headerlink" title="12、jQuery"></a>12、jQuery</h2><p>核心公式：</p>
<p><code>$(selector).action()</code></p>
<p>selector是选择器，同css一样，<code>#</code>是id选择器，<code>.</code>是类选择器；</p>
<p>action是事件。</p>
<p>利用jQuery实现浏览器全局加载函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">       <span class="comment">//代码块</span></span><br><span class="line">   &#125;);</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://fangaoxs.github.io/2020/08/08/front-end/JavaScript/js%E5%B0%8F%E6%8A%80%E5%B7%A7/JavaScript%E5%B0%8F%E6%8A%80%E5%B7%A7/" data-id="clto66l5x0034sck6aq7z2bh3" data-title="JavaScript小技巧" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-back-end/Java/Java多线程/Java多线程" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/07/13/back-end/Java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/" class="article-date">
  <time class="dt-published" datetime="2020-07-13T07:30:39.000Z" itemprop="datePublished">2020-07-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/07/13/back-end/Java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/">Java多线程</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="创建线程的三种方式"><a href="#创建线程的三种方式" class="headerlink" title="创建线程的三种方式"></a>创建线程的三种方式</h2><ol>
<li>继承Thread类<ul>
<li>继承Thread类</li>
<li>使用Thread类对象的<code>start()</code>启动线程</li>
</ul>
</li>
<li>实现Runnable接口（推荐）<ul>
<li>实现Runnable接口</li>
<li>使用Thread类对象代理线程用<code>start()</code>启动线程</li>
</ul>
</li>
<li>实现Callable接口</li>
</ol>
<h3 id="第一种方式：继承Thread类"><a href="#第一种方式：继承Thread类" class="headerlink" title="第一种方式：继承Thread类"></a>第一种方式：继承Thread类</h3><ol>
<li><p>创建类继承Thread类，重写<code>run()</code>方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="comment">//线程体</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">200</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;TestThread:&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>主入口</p>
<p>创建Thread类对象，再调用<code>start()</code>方法就可以启动线程了</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">    <span class="comment">//主进程</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//方式一：继承Thread类</span></span><br><span class="line">        <span class="comment">//新建线程对象，再调用start()方法</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">TestThread</span>().start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="第二种方式：实现Runnable接口"><a href="#第二种方式：实现Runnable接口" class="headerlink" title="第二种方式：实现Runnable接口"></a>第二种方式：实现Runnable接口</h3><ol>
<li><p>创建线程类，实现Runnable接口，重写<code>run()</code>方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">200</span>; i++) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;-&gt;&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其中<code>Thread.currentThread().getName()</code>是获得当前线程的线程名，在创建线程对象的时候可以给线程指定线程名</p>
</li>
<li><p>主入口</p>
<p>创建Thread类对象，使用代理模式将实现了Runnable接口的线程丢入Thread类对象里，再调用Thread类对象的<code>start()</code>方法启动线程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">    <span class="comment">//主进程</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//方式二：实现Runnable接口</span></span><br><span class="line">        <span class="comment">//新建Thread()代理，参数是线程，再调用start()</span></span><br><span class="line">        <span class="type">TestRunnable</span> <span class="variable">runnable</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestRunnable</span>();</span><br><span class="line">        <span class="comment">//第一个参数是线程，第二个参数是线程名</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(runnable,<span class="string">&quot;RunnableThread&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="第三种方式：实现Callable接口"><a href="#第三种方式：实现Callable接口" class="headerlink" title="第三种方式：实现Callable接口"></a>第三种方式：实现Callable接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestCallable</span> <span class="keyword">implements</span> <span class="title class_">Callable</span>&lt;Boolean&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">call</span><span class="params">()</span>  &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;-&gt;&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException &#123;</span><br><span class="line">        <span class="comment">//创建线程对象</span></span><br><span class="line">        <span class="type">TestCallable</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestCallable</span>();</span><br><span class="line">        <span class="type">TestCallable</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestCallable</span>();</span><br><span class="line">        <span class="type">TestCallable</span> <span class="variable">t3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestCallable</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1、开启线程池服务</span></span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">service</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2、将线程提交以供执行</span></span><br><span class="line">        Future&lt;Boolean&gt; s1 = service.submit(t1);</span><br><span class="line">        Future&lt;Boolean&gt; s2 = service.submit(t2);</span><br><span class="line">        Future&lt;Boolean&gt; s3 = service.submit(t3);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3、分别获取线程执行的结果</span></span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">r1</span> <span class="operator">=</span> s1.get();</span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">r2</span> <span class="operator">=</span> s2.get();</span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">r3</span> <span class="operator">=</span> s3.get();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4、关闭服务（切记）</span></span><br><span class="line">        service.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>实现Callable接口，并且指定返回值类型</li>
<li>在这个类里重写<code>call()</code>接口，注意区别前两种， 前两种是实现<code>run()</code>方法</li>
<li>先开启线程池服务，用<code>sumbit()</code>方法将线程提交，然后用<code>get()</code>方法得到线程的返回值</li>
<li>最后记得关闭线程池服务</li>
</ol>
<h2 id="了解静态代理模式"><a href="#了解静态代理模式" class="headerlink" title="了解静态代理模式"></a>了解静态代理模式</h2><p>举个例子：假如你要结婚了，你需要找婚庆公司帮忙，那么实际上你和婚庆公司都要结婚，但是婚庆公司做得可能会比你做得要多，比如帮你筹备，帮你计划，帮你拍照等待，但是无论如何你们都是要实现同一个目的——&gt;”结婚”，只是婚庆公司会帮你做而且做得更好，所以婚庆公司就是代理，你就是真正要实现的角色。用户只需要关心自己要实现的功能就好了，婚庆公司（代理）帮你做一些锦上添花的事情，但是具体怎么做，你其实并不用操心。</p>
<ol>
<li><p>共同实现的功能（结婚）</p>
<p>用户和婚庆公司（代理）都需要实现的共同功能——结婚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Marry</span> &#123;</span><br><span class="line">    <span class="comment">//结婚</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">Marry</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>角色实现这个功能（用户实现结婚）</p>
<p>你只需要简单的将你的名字输出就可以了</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> <span class="keyword">implements</span> <span class="title class_">Marry</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String peopleName;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">People</span><span class="params">(String peopleName)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.peopleName = peopleName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Marry</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(peopleName+<span class="string">&quot;结婚了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>代理需要实现这个功能（代理实现结婚）</p>
<p>婚庆公司不仅帮你实现了结婚，甚至还用了<code>before()</code>和<code>after()</code>方法帮你增强了结婚前和结婚后。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WeddingCompany</span> <span class="keyword">implements</span> <span class="title class_">Marry</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Marry target;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">WeddingCompany</span><span class="params">(Marry target)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Marry</span><span class="params">()</span> &#123;</span><br><span class="line">        before();</span><br><span class="line">        target.Marry();</span><br><span class="line">        after();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;婚庆公司帮忙结婚前&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;婚庆公司帮忙结婚后&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>主入口</p>
<p>需要新建people对象，同时将people对象作为WeddingCompany代理的参数，然后执行接口中的方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//新建people对象</span></span><br><span class="line">        <span class="type">People</span> <span class="variable">people</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">People</span>(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">        <span class="comment">//代理帮忙实现接口并且执行方法</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">WeddingCompany</span>(people).Marry();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>总结：</p>
<ol>
<li>定义一个接口，声明方法</li>
<li>目标类实现这个接口，重写里面的方法</li>
<li>代理类也要实现这个接口，在代理的构造方法中，需要另外的共同实现同一接口的对象作为构造函数target，同时在重写的方法里执行目标对象target的方法和代理的增强。</li>
<li>AOP面向切面编程应该就是静态代理的强化，降低耦合。一个代码只需要专注自己的事情，另外需要对这段代码增强就直接使用静态代理就好了。</li>
</ol>
</li>
</ol>
<p>由于开启线程或者创建线程的Thread类里实际上就是实现了Runnable接口，同时创建线程的第二种方式也是实现Runnable接口。所以Thread类就是代理，实现Runnable接口的类就是角色。启动线程就是通过代理模式完成的。</p>
<h2 id="lambda表达式"><a href="#lambda表达式" class="headerlink" title="lambda表达式"></a>lambda表达式</h2><p>在平常情况下，我们想要实现接口，可以用implements实现它，同时还有一种快捷但是不那么已读的方式，就是使用匿名内部类来临时实现接口，比如：</p>
<ul>
<li><p>接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">print</span><span class="params">(String name,String password)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>匿名内部类</p>
<p>我们在创建UserService这个对象的时候，直接在后面跟上{}并且重写里面的方法就可以临时实现这个接口了，但是这个实现类并没有具体的类名，所以这就是匿名内部类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">UserService</span> <span class="variable">service</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserService</span>() &#123;</span><br><span class="line">          <span class="meta">@Override</span></span><br><span class="line">          <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">(String name, String password)</span> &#123;</span><br><span class="line">              System.out.println(<span class="string">&quot;name=&quot;</span>+name);</span><br><span class="line">         	 	System.out.println(<span class="string">&quot;password=&quot;</span>+password);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;;</span><br></pre></td></tr></table></figure>

<p>就有点像Android开发里的按钮监听事件，也是可以用匿名内部类的方式来实现的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">setOnClickListener(<span class="keyword">new</span> <span class="title class_">OnClickListener</span>()&#123;  </span><br><span class="line">          <span class="meta">@Override</span>  </span><br><span class="line">          <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;  </span><br><span class="line">              <span class="comment">// TODO Auto-generated method stub  </span></span><br><span class="line">              <span class="type">Intent</span> <span class="variable">intet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(MainActivity.<span class="built_in">this</span>,seekbar.class);  </span><br><span class="line">              startActivity(intet);  </span><br><span class="line">              <span class="comment">//finish();  </span></span><br><span class="line">          &#125;  </span><br><span class="line">            </span><br><span class="line">      &#125;);  </span><br></pre></td></tr></table></figure>
</li>
<li><p>接口只需要实现一个方法</p>
<p>如果接口中只需要实现一个方法的话，那么那么多的匿名内部类的声明代码好像就可以不用写了，因为这个接口本身就只有这一个方法，无论怎样实现都指向这个方法，所有就有了lambda表达式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">userService=(name, password) -&gt; &#123;</span><br><span class="line">          System.out.println(<span class="string">&quot;name=&quot;</span>+name);</span><br><span class="line">          System.out.println(<span class="string">&quot;password=&quot;</span>+password);</span><br><span class="line">      &#125;;</span><br><span class="line">      userService.print(<span class="string">&quot;名字&quot;</span>,<span class="string">&quot;密码&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>可以看到，我们只需要在实现这个接口的时候用<code>(name,password)</code>传递参数，<code>-&gt;&#123;&#125;</code>表明这是一个lambda表达式，中间放实现体就可以了。由于创建线程的方式就是实现Runnable接口里面就只需要重写<code>run()</code>方法，所以我们很多时候就需要用lambda表达式来创建线程。</p>
</li>
</ul>
<h2 id="lambda表达式结合代理模式"><a href="#lambda表达式结合代理模式" class="headerlink" title="lambda表达式结合代理模式"></a>lambda表达式结合代理模式</h2><p>所以综上所述，实际上我们可以利用代理模式并且使用lambda表达式来快速创建线程</p>
<ol>
<li><p>创建Thread静态代理</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestLambda</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//静态代理</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>利用lambda表达式快速创建线程，同时给代理加上<code>start()</code>启动线程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestLambda</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//lambda表达式快速创建线程</span></span><br><span class="line">        <span class="type">Runnable</span> <span class="variable">runnable</span> <span class="operator">=</span> ()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;-&gt;&quot;</span>+i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(runnable).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>由于静态代理需要的参数一定是实现Runnable类对象，所以还可以简化成：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestLambda</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;-&gt;&quot;</span>+i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>直接在new Thread里写lambda表达式。</p>
</li>
</ol>
<h2 id="线程停止"><a href="#线程停止" class="headerlink" title="线程停止"></a>线程停止</h2><p>Java已经不再建议使用传统的<code>stop()</code>和<code>destory()</code>方法来停止线程，而是建议利用外部标识位来手动停止线程</p>
<ul>
<li><p>线程</p>
<p>标识位flag默认是true，所以while会一直循环，但是如果外部执行了<code>stop()</code>方法的话那么flag就会变成false，while循环就停止了</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> flag=<span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> i=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (flag)&#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;-&gt;&quot;</span>+i++);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//置标识位为false</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">stop</span><span class="params">()</span>&#123;</span><br><span class="line">        flag=<span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>主入口</p>
<p>首先创建线程对象然后启动线程，利用循环来判断，如果循环到了900那么就执行线程里的<code>stop()</code>方法：置线程里的标识位为false从而达到从外部手动停止线程的目的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestStop</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建线程对象</span></span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">myThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        <span class="comment">//启动线程</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(myThread).start();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;-&gt;&quot;</span>+i);</span><br><span class="line">            <span class="keyword">if</span> (i==<span class="number">900</span>)&#123;<span class="comment">//如果i循环到了900则执行线程的停止方法</span></span><br><span class="line">                myThread.stop();</span><br><span class="line">                System.out.println(<span class="string">&quot;线程停止&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="线程休眠（sleep）"><a href="#线程休眠（sleep）" class="headerlink" title="线程休眠（sleep）"></a>线程休眠（sleep）</h2><p>线程休眠就是直接调用Thread类的<code>sleep(long millis)</code>方法就好了，参数是毫秒，需要捕获<code>InterruptedException</code>异常，然后线程就会休眠了。</p>
<h2 id="线程礼让（yield）"><a href="#线程礼让（yield）" class="headerlink" title="线程礼让（yield）"></a>线程礼让（yield）</h2><p>线程礼让就是在线程体中调用Thread类的<code>yield()</code>方法，注意“礼让”不代表这个线程一定停止运行，而是有可能让另外个线程运行。</p>
<h2 id="线程强制执行（join）"><a href="#线程强制执行（join）" class="headerlink" title="线程强制执行（join）"></a>线程强制执行（join）</h2><p>线程强制执行就是调用Thread类中<code>join()</code>方法，让线程插队。</p>
<ul>
<li><p>线程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">JoinThread</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;-&gt;&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>主入口</p>
<p>先创建Thread对象，并且给线程名赋为vip，在for循环里主线程也要打印i，同时当i循环到20的时候，调用Thread类对象的<code>join</code>方法强制执行自定义的线程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestJoin</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="comment">//创建线程对象</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">JoinThread</span>(), <span class="string">&quot;vip&quot;</span>);</span><br><span class="line">        <span class="comment">//启动线程</span></span><br><span class="line">        thread.start();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//循环数到了20后自定义线程插队</span></span><br><span class="line">            <span class="keyword">if</span> (i==<span class="number">20</span>)&#123;</span><br><span class="line">                thread.join();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//main主线程打印</span></span><br><span class="line">            System.out.println(<span class="string">&quot;main-&gt;&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>观察结果</p>
<p>通过观察运行结果我们可以指导，在i&lt;20之前，main线程和用户自定义线程并行，但是到了20时，用户自定义线程强制执行后就一直执行用户自定义线程了，直到它执行完毕。最后再是主线程执行完毕。</p>
</li>
</ul>
<h2 id="线程状态（State）"><a href="#线程状态（State）" class="headerlink" title="线程状态（State）"></a>线程状态（State）</h2><p><img src="/2020/07/13/back-end/Java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/image-20200710092846896.png"></p>
<h3 id="获取线程状态"><a href="#获取线程状态" class="headerlink" title="获取线程状态"></a>获取线程状态</h3><p>线程的状态对应的有5个：</p>
<table>
<thead>
<tr>
<th>线程状态</th>
<th>Java常量</th>
</tr>
</thead>
<tbody><tr>
<td>new</td>
<td><code>Thread.State.NEW</code></td>
</tr>
<tr>
<td>就绪</td>
<td><code>Thread.State.RUNNABLE</code></td>
</tr>
<tr>
<td>阻塞</td>
<td><code>Thread.State.BLOCKED</code></td>
</tr>
<tr>
<td>等待</td>
<td><code>Thread.State.TIMED_WAITING</code></td>
</tr>
<tr>
<td>死亡</td>
<td><code>Thread.State.TERMINATED</code></td>
</tr>
</tbody></table>
<p>可以利用<code>thread.getState()</code>来获得线程的状态，可以利用这个来循环判断线程是否停止，再执行相应的操作。</p>
<h3 id="线程状态应用"><a href="#线程状态应用" class="headerlink" title="线程状态应用"></a>线程状态应用</h3><ul>
<li><p>创建一个线程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StateThread</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">100</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;thread-&gt;&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>主方法运行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestState</span> &#123;</span><br><span class="line">    <span class="comment">//声明线程状态对象</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Thread.State state;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//新建线程对象</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">StateThread</span>());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获得线程状态对象</span></span><br><span class="line">        state=thread.getState();</span><br><span class="line">        System.out.println(state);<span class="comment">//NEW</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//启动线程</span></span><br><span class="line">        thread.start();</span><br><span class="line">        <span class="comment">//获得新的线程状态对象（更新）</span></span><br><span class="line">        state=thread.getState();</span><br><span class="line">        <span class="comment">//判断目前的线程对象是否等于TERMINATED</span></span><br><span class="line">        <span class="keyword">while</span> (state!= Thread.State.TERMINATED)&#123;</span><br><span class="line">            <span class="comment">//获得新的线程状态对象（更新）</span></span><br><span class="line">            state=thread.getState();</span><br><span class="line">            System.out.println(state);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//获得新的线程状态对象（更新）</span></span><br><span class="line">        state=thread.getState();</span><br><span class="line">        System.out.println(state);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>可以看到，我用<code>new Thread()</code>创建了一个新的线程对象<code>thread</code>，然后通过<code>thread</code>对象的<code>getState()</code>方法得到了目前线程的状态并且赋给了<code>state</code>对象，同时再通过<code>state</code>与<code>Thread.State.TERMINATED</code>进行比对，如果线程状态不为TERMINATED则继续执行循环，这就是一个利用线程状态的例子。</p>
<h2 id="线程优先级（Priority）"><a href="#线程优先级（Priority）" class="headerlink" title="线程优先级（Priority）"></a>线程优先级（Priority）</h2><p>线程优先级就是CPU调度线程的优先级，优先级越高CPU就会优先调度，<strong>但是优先级越高就不代表它一定被先调度</strong>，只是提高权重，被CPU先调度的可能性更高</p>
<p>可以通过<code>Thread</code>线程对象的<code>getPriority()</code>方法获得当前线程的优先级的值（1~10）是整型，同时也可以通过<code>Thread</code>线程对象的<code>setPriority()</code>方法设置优先级，如果没有设置则默认为5，同时<code>Thread</code>类为给线程优先级初始了三个常量：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 线程最小值</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">MIN_PRIORITY</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 线程正常值</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">NORM_PRIORITY</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 线程最大值</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">MAX_PRIORITY</span> <span class="operator">=</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<p>感受一下设置线程优先级：</p>
<ul>
<li><p>创建一个线程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Priority</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//打印当前线程名以及线程优先级</span></span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;-&gt;&quot;</span>+Thread.currentThread().getPriority());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Thread.currentThread()</code>可以获得当前运行的线程对象；</p>
<p><code>Thread.currentThread().getName()</code>可以获得当前运行的线程对象的名字，需要在创建线程对象的时候给线程指定一个线程名（String）；</p>
<p><code>Thread.currentThread().getPriority()</code>可以获得当前运行的线程对象的优先级的值；</p>
</li>
<li><p>主方法里运行线程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestPriority</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Priority</span> <span class="variable">priority</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Priority</span>();</span><br><span class="line">        <span class="comment">//创建线程1对象，并且设置线程名为t1</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(priority,<span class="string">&quot;t1&quot;</span>);</span><br><span class="line">        <span class="comment">//创建线程2对象，并且设置线程名为t2</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(priority,<span class="string">&quot;t2&quot;</span>);</span><br><span class="line">        <span class="comment">//创建线程2对象，并且设置线程名为t3</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(priority,<span class="string">&quot;t3&quot;</span>);</span><br><span class="line">        <span class="comment">//创建线程4对象，并且设置线程名为t4</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(priority,<span class="string">&quot;t4&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置线程优先级为最大值10</span></span><br><span class="line">        t1.setPriority(Thread.MAX_PRIORITY);</span><br><span class="line">        <span class="comment">//设置线程优先级为5</span></span><br><span class="line">        t2.setPriority(<span class="number">5</span>);</span><br><span class="line">        <span class="comment">//设置线程优先级为最小值1</span></span><br><span class="line">        t3.setPriority(Thread.MIN_PRIORITY);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//启动线程</span></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">        t4.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>观察运行结果</p>
<p><img src="/2020/07/13/back-end/Java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/image-20200710154321611.png"></p>
</li>
</ul>
<p><img src="/2020/07/13/back-end/Java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/image-20200710154333020.png"></p>
<p><img src="/2020/07/13/back-end/Java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/image-20200710154345716.png"></p>
<p>通过观察我们得出结论：线程优先级越高不代表它一定会被先运行，但是它被CPU调度的可能性更大。同时没有用<code>setPriority()</code>方法给线程指定初始值的话默认是5。</p>
<h2 id="守护线程（Daemon）"><a href="#守护线程（Daemon）" class="headerlink" title="守护线程（Daemon）"></a>守护线程（Daemon）</h2><p>线程分为<strong>用户线程</strong>和<strong>守护线程</strong></p>
<p>main线程和用户自定义的线程一般都是用户线程</p>
<p>虚拟机必须确保用户线程执行完毕</p>
<p>虚拟机不必等待守护线程执行完毕</p>
<p>守护线程可以用来后台记录操作日志，监控内容，垃圾回收等</p>
<p>用<code>Thread</code>线程对象的<code>setDaemon(true)</code>方法将线程设置为守护线程</p>
<ul>
<li><p>创建用户线程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;People Alive &quot;</span>+i+<span class="string">&quot; Day&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;People Dead&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>循环<code>i</code>然后打印<code>人还活着</code>，直到<code>i</code>结束打印<code>人死了</code></p>
</li>
<li><p>创建守护线程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">God</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;God Bless You&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>while</code>为真死循环打印<code>上帝保佑你</code></p>
</li>
<li><p>创建主方法入口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">God</span> <span class="variable">god</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">God</span>();</span><br><span class="line">        <span class="type">People</span> <span class="variable">people</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">People</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建God线程对象名叫threadGod</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">threadGod</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(god);</span><br><span class="line">        <span class="comment">//创建People线程对象名叫threadPeople</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">threadPeople</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(people);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//将threadGod线程设置为守护线程</span></span><br><span class="line">        threadGod.setDaemon(<span class="literal">true</span>);<span class="comment">//true守护线程，false用户线程，线程默认都是false</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//启动线程</span></span><br><span class="line">        threadGod.start();</span><br><span class="line">        threadPeople.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过<code>threadGod</code>的<code>setDaemon()</code>方法将God线程设置为守护线程，People线程则就是默认的用户线程，观察结果我们可以发现，照理说<code>while(true)</code>循环应该永远进行下去，可是当people线程结束之后，god循环也随之结束了，所以我们就可以得出结论：虚拟机不必等待守护线程结束，虚拟机必须保证用户线程结束。就像上帝就像守护线程永远活着，人就像用户线程只会活一段时间。</p>
</li>
</ul>
<h2 id="线程同步（Synchronized）"><a href="#线程同步（Synchronized）" class="headerlink" title="线程同步（Synchronized）"></a>线程同步（Synchronized）</h2><h3 id="线程不安全举例"><a href="#线程不安全举例" class="headerlink" title="线程不安全举例"></a>线程不安全举例</h3><ul>
<li><h4 id="多个人同时买票"><a href="#多个人同时买票" class="headerlink" title="多个人同时买票"></a>多个人同时买票</h4><p>买票线程：</p>
<ol>
<li>其中ticketNumber是所有线程操作的公共资源</li>
<li>定义了一个标识flag使得while循环能够外部停止</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BuyTicket</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="comment">//限定20张票</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> ticketNumber=<span class="number">20</span>;</span><br><span class="line">    <span class="comment">//定义一个标识使得循环能够结束</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> flag=<span class="literal">true</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (flag)&#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;-&gt;&quot;</span>+buyTicket());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 买票</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 买的是第几张票</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">buyTicket</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (ticketNumber&lt;=<span class="number">0</span>)&#123;<span class="comment">//无票</span></span><br><span class="line">            flag=<span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">return</span> ticketNumber;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;<span class="comment">//有票</span></span><br><span class="line">            <span class="keyword">return</span> ticketNumber--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>主入口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestBuyTicket</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">BuyTicket</span> <span class="variable">buyTicket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BuyTicket</span>();</span><br><span class="line">        <span class="comment">//创建线程对象并且启动线程</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(buyTicket,<span class="string">&quot;你&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(buyTicket,<span class="string">&quot;我&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(buyTicket,<span class="string">&quot;黄牛&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p><img src="/2020/07/13/back-end/Java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/image-20200712130741722.png"></p>
<p>可以看到”我“和”黄牛“买到了同一张第20票，这是不安全的。</p>
</li>
<li><h4 id="银行取钱"><a href="#银行取钱" class="headerlink" title="银行取钱"></a>银行取钱</h4><p>账户（Account）类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//账户类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Account</span>&#123;</span><br><span class="line">    <span class="comment">//账户余额</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> balance;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Account</span><span class="params">(<span class="type">int</span> balance)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.balance=balance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>取钱线程：</p>
<ol>
<li>定义了amount为取的金额</li>
<li>取了钱后accont类对象的balance就减去amount</li>
<li>分别打印出取钱前后的账户金额</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//取钱线程</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Withdraw</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="comment">//取出的金额</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> amount;</span><br><span class="line">    <span class="comment">//账户对象</span></span><br><span class="line">    <span class="keyword">private</span> Account account;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Withdraw</span><span class="params">(<span class="type">int</span> amount,Account account)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.amount=amount;</span><br><span class="line">        <span class="built_in">this</span>.account=account;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (account.balance&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;账户没钱了&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            before();</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;取了&quot;</span> + amount);</span><br><span class="line">            account.balance-=amount;</span><br><span class="line">            after();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//打印取钱之前的账户余额</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;取前账户余额：&quot;</span>+account.balance);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//打印取钱之后的账户余额</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;取后账户余额：&quot;</span>+account.balance);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>主入口：</p>
<ol>
<li>给两个线程分别赋线程名为”女“和”男“</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestBank</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建账户类对象，余额有500</span></span><br><span class="line">        <span class="type">Account</span> <span class="variable">account</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Account</span>(<span class="number">500</span>);</span><br><span class="line">        <span class="comment">//创建取钱线程</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Withdraw</span>(<span class="number">500</span>,account),<span class="string">&quot;女&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Withdraw</span>(<span class="number">100</span>,account),<span class="string">&quot;男&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>第一次运行：</p>
<p><img src="/2020/07/13/back-end/Java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/image-20200712132616245.png"></p>
<p>第二次运行：</p>
<p><img src="/2020/07/13/back-end/Java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/image-20200712132634432.png"></p>
<p>观察运行结果我们可以发现，有时只有女的可以取钱，但是有时男女同时可以取，并且账户余额还变成了负的，他们一共取了100+500&#x3D;600元，这也是不安全的。</p>
</li>
<li><h4 id="List集合"><a href="#List集合" class="headerlink" title="List集合"></a>List集合</h4><ol>
<li>定义了1000个线程（线程体是用lambda表达式定义的）</li>
<li>将1000个线程名添加到List集合里</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestList</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ArrayList&lt;String&gt; arrayList=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">                arrayList.add(Thread.currentThread().getName());</span><br><span class="line">            &#125;).start();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;集合长度=&quot;</span>+arrayList.size());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p><img src="/2020/07/13/back-end/Java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/image-20200712133334003.png"></p>
<p>观察运行结果我们可以发现，集合长度只有563没有1000，照理说全部线程名加入List集合中的话List的长度应该有1000的，说明线程会覆盖掉其他线程。</p>
</li>
</ul>
<h3 id="synchronized关键字定义同步锁"><a href="#synchronized关键字定义同步锁" class="headerlink" title="synchronized关键字定义同步锁"></a>synchronized关键字定义同步锁</h3><ul>
<li><p>多人买票的同步锁</p>
<p>以刚刚的例子为例，如果没有定义同步锁，线程去操作ticketNumber（买票）是混乱的，是杂乱的，极有可能导致ticketNumber冲突，所以就需要定义一个锁。<code>synchronized</code>同步锁就好像是一个仓库的钥匙，假如有很多人需要去这个仓库拿东西，但是先进去的人就把门锁上了，后面的人就进不来了，里面的人操作完后出来就会把锁释放，然后有人拿到这个锁就可以进去仓库操作了，然后循环，就不会像之前没有定义同步锁一样所有人都能进仓库操作。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestBuyTicket</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">BuyTicket</span> <span class="variable">buyTicket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BuyTicket</span>();</span><br><span class="line">        <span class="comment">//创建线程对象并且启动线程</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(buyTicket,<span class="string">&quot;你&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(buyTicket,<span class="string">&quot;我&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(buyTicket,<span class="string">&quot;黄牛&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BuyTicket</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="comment">//限定20张票</span></span><br><span class="line">    <span class="keyword">private</span> Integer ticketNumber=<span class="number">20</span>;</span><br><span class="line">    <span class="comment">//定义一个标识使得循环能够结束</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> flag=<span class="literal">true</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (flag)&#123;</span><br><span class="line">            buyTicket();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//买票，并且给buyTicket方法加上同步锁</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">buyTicket</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (ticketNumber&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">            flag=<span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;-&gt;&quot;</span>+ticketNumber--);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>只需要给<code>buyTicket0</code>方法加上同步锁就可以了</p>
<p>运行结果：</p>
<p><img src="/2020/07/13/back-end/Java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/image-20200712153437454.png"></p>
<p>不会和别人拿票冲突，并且也不会有拿到第0张票的时候</p>
</li>
<li><p>银行取钱同步锁</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//取钱线程</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Withdraw</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="comment">//取出的金额</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> amount;</span><br><span class="line">    <span class="comment">//账户对象</span></span><br><span class="line">    <span class="keyword">private</span> Account account;</span><br><span class="line">    <span class="comment">//定义标识</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> flag;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Withdraw</span><span class="params">(<span class="type">int</span> amount,Account account)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.amount=amount;</span><br><span class="line">        <span class="built_in">this</span>.account=account;</span><br><span class="line">        <span class="built_in">this</span>.flag=<span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (flag)&#123;</span><br><span class="line">            getMoney();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//取钱</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getMoney</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//给account对象加上同步锁</span></span><br><span class="line">        <span class="keyword">synchronized</span> (account)&#123;</span><br><span class="line">            <span class="keyword">if</span> (account.balance&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">                flag=<span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;---------------&quot;</span>);</span><br><span class="line">            before();</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;取了&quot;</span>+amount);</span><br><span class="line">            account.balance-=amount;</span><br><span class="line">            after();</span><br><span class="line">            System.out.println(<span class="string">&quot;---------------&quot;</span>);</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//打印取钱之前的账户余额</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;取前账户余额：&quot;</span>+account.balance);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//打印取钱之后的账户余额</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;取后账户余额：&quot;</span>+account.balance);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>只需要给<code>account</code>对象加上同步锁，然后在同步锁里执行代码块就行了</p>
<p>运行结果：</p>
<p><img src="/2020/07/13/back-end/Java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/image-20200712153642880.png"></p>
<p>取钱再也不会出现余额变成负数的情况了。因为”男“或者”女“分别取钱的时候另外一个线程是不能对<code>account</code>对象进行操作的，只有等其中一个操作完另外一个线程才能进行操作。 </p>
</li>
<li><p><code>CopyOnWriteArrayList</code>安全的集合</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestList</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//用CopyOnWriteArrayList定义安全的集合</span></span><br><span class="line">        CopyOnWriteArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">CopyOnWriteArrayList</span>&lt;String&gt;();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">                list.add(Thread.currentThread().getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(list.size());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里用了<code>Thread.sleep()</code>才能打印出集合的大小是因为在主线程里线程跟主线程是一起在运行的，如果不加线程休眠的话就可能会导致自定义线程还没有跑完但是主线程里已经打印出大小了。</p>
</li>
</ul>
<h2 id="Lock锁和Synchronized锁"><a href="#Lock锁和Synchronized锁" class="headerlink" title="Lock锁和Synchronized锁"></a>Lock锁和Synchronized锁</h2><p>lock锁是显式锁，需要显示加锁，显式解锁，而synchronized是隐式锁；</p>
<p>lock只能给代码块加锁，而synchonized能给代码和方法都加上锁；</p>
<p>加了锁能够解决安全和资源冲突问题，但是会降低线程性能，所以不是一定都要加锁。</p>
<p>lock锁的定义方式是先定义一个<code>ReentrantLock</code>对象</p>
<ul>
<li><p>不加锁</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestLock</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//新建线程lock对象</span></span><br><span class="line">        <span class="type">Lock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Lock</span>();</span><br><span class="line">        <span class="comment">//新建线程并启动</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(lock,<span class="string">&quot;你&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(lock,<span class="string">&quot;我&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(lock,<span class="string">&quot;他&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Lock</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> ticketNumber=<span class="number">10</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> flag=<span class="literal">true</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (flag)&#123;</span><br><span class="line">            buyTicket();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buyTicket</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (ticketNumber&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">            flag=<span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;-&gt;&quot;</span>+ticketNumber--);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p><img src="/2020/07/13/back-end/Java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/image-20200712163619370.png"></p>
<p>会出现买到0甚至-1票的情况</p>
</li>
<li><p>加锁</p>
<p>先定义一个私有的<code>ReentrantLock</code>对象取名叫lock，再在需要上锁的代码块前加上<code>lock.lock()</code>方法加锁，再在需要释放锁的地方加上<code>lock.unlock()</code>释放锁，注意需要用<code>try</code>代码块包起来，将<code>lock.lock()</code>放在try里，将<code>lock.unlock()</code>放在finally里</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestLock</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//新建线程lock对象</span></span><br><span class="line">        <span class="type">Lock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Lock</span>();</span><br><span class="line">        <span class="comment">//新建线程并启动</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(lock,<span class="string">&quot;你&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(lock,<span class="string">&quot;我&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(lock,<span class="string">&quot;他&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Lock</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> ticketNumber=<span class="number">10</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> flag=<span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">private</span> ReentrantLock lock=<span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (flag)&#123;</span><br><span class="line">            buyTicket();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buyTicket</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            lock.lock();</span><br><span class="line">            <span class="keyword">if</span> (ticketNumber&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">                flag=<span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">100</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;-&gt;&quot;</span>+ticketNumber--);</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p><img src="/2020/07/13/back-end/Java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/image-20200712164412113.png"></p>
<p>没有人拿到第0甚至第-1张票，结果是符合我们的预期的。</p>
</li>
</ul>
<h2 id="生产者——消费者问题（线程通信）"><a href="#生产者——消费者问题（线程通信）" class="headerlink" title="生产者——消费者问题（线程通信）"></a>生产者——消费者问题（线程通信）</h2><p>假如说有两个线程一个是生产者（producer）另一个是消费者（customer）。</p>
<p>生产者：没有生产东西前，需要通知消费者等待，生产后通知消费者消费。</p>
<p>消费者：在没有东西消费前，需要通知生产者生产，消费后通知生产者生产。</p>
<p>Java提供了几个方法供线程通信</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>wait()</td>
<td>表示线程会一直等待，直到其他线程通知，跟sleep()不同，wait会释放锁。</td>
</tr>
<tr>
<td>wait(long timeout)</td>
<td>指定等待的毫秒数</td>
</tr>
<tr>
<td>notify()</td>
<td>通知（唤醒）一个等待的线程</td>
</tr>
<tr>
<td>notifyAll()</td>
<td>通知（唤醒）同一个对象上所有调用wait方法的线程，优先级高的线程先被调度</td>
</tr>
</tbody></table>
<p>以上方法均是<code>Object</code>类的方法，但只能在同步块或者同步方法中使用，否则会抛出异常。</p>
<h3 id="解放方式1：管程法"><a href="#解放方式1：管程法" class="headerlink" title="解放方式1：管程法"></a>解放方式1：管程法</h3><p>管程法适用于<code>类似消费者去饭店吃炸鸡，生产者可以在消费者消费的时候生产</code>的问题</p>
<ul>
<li>生产者：生产资源</li>
<li>消费者：消费资源</li>
<li>缓冲区：存放资源</li>
</ul>
<p>生产者将生产的资源放入缓冲区，消费者从缓冲区取走资源。如果缓冲区满了生产者就停止生产（等待）；如果缓冲区为0则消费者停止消费（等待）。</p>
<ol>
<li><p>生产的产品：</p>
<p>存放产品的编号</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//生产的产品</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Product</span>&#123;</span><br><span class="line">    <span class="comment">//产品编号</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Product</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
<li><p>缓冲区：</p>
<p>看作有大小限制的存放资源的仓库，在缓冲区里定义存入资源和取出资源的方法（<strong>记得加上同步锁</strong>），在这两个方法里先做一个是否满或者是否为空的判断，如果为空或者为满则<code>wait()</code>等待，否则消费或者生产了产品后记得用<code>notify()</code>通知另一个线程消费或者生产。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//缓冲区：存放产品的仓库</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Buffer</span>&#123;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//定义数组大小（缓冲区）</span></span><br><span class="line">    Product[] products=<span class="keyword">new</span> <span class="title class_">Product</span>[<span class="number">10</span>];</span><br><span class="line">    <span class="comment">//定义产品的数量</span></span><br><span class="line">    <span class="type">int</span> number=<span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//生产者生产产品，往仓库中放入产品</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(Product product)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (number==products.length)&#123;<span class="comment">//仓库满了</span></span><br><span class="line">            <span class="comment">//生产等待，等待消费者消费</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//将生产出来的产品放到数组里</span></span><br><span class="line">        products[number]=product;</span><br><span class="line">        <span class="comment">//数量加一</span></span><br><span class="line">        number++;</span><br><span class="line">        <span class="comment">//通知消费者消费</span></span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;生产了第&quot;</span>+product.getId()+<span class="string">&quot;产品&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//消费者消费产品，从仓库中取出产品</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> Product <span class="title function_">pull</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (number==<span class="number">0</span>)&#123;<span class="comment">//仓库没有产品</span></span><br><span class="line">            <span class="comment">//消费等待，等待生产者生产</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//数量减一</span></span><br><span class="line">        number--;</span><br><span class="line">        <span class="comment">//将仓库的第number个赋给产品准备返回</span></span><br><span class="line">        <span class="type">Product</span> <span class="variable">product</span> <span class="operator">=</span> products[number];</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;消费了第&quot;</span>+product.getId()+<span class="string">&quot;产品&quot;</span>);</span><br><span class="line">        <span class="comment">//通知生产者生产</span></span><br><span class="line">        <span class="built_in">this</span>.notifyAll();</span><br><span class="line">        <span class="keyword">return</span> product;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
<li><p>生产者线程</p>
<p>因为在生产者线程里需要对缓冲区进行操作，所以需要提前定义缓冲区，生产产品就是new一个产品对象，并且将编号赋给它，同时丢入缓冲区，以供消费者直接从缓冲区中直接取出产品。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//生产者：生产产品</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Producer</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="comment">//定义缓冲区对象，因为生产者需要操作缓冲区</span></span><br><span class="line">    <span class="keyword">private</span> Buffer buffer;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Producer</span><span class="params">(Buffer buffer)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.buffer = buffer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//i等于0的时候实际上是生产的第1件产品</span></span><br><span class="line">            produce(i+<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//生产</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">produce</span><span class="params">(<span class="type">int</span> i)</span>&#123;</span><br><span class="line">        <span class="comment">//生产产品</span></span><br><span class="line">        <span class="type">Product</span> <span class="variable">product</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Product</span>(i);</span><br><span class="line">        <span class="comment">//将生产的产品存入缓冲区</span></span><br><span class="line">        buffer.push(product);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>消费者线程</p>
<p>因为消费者线程里也需要对缓冲区进行操作，所以需要提前定义缓冲区，消费产品就是从缓冲区取一个产品。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//消费者：消费商品</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Consumer</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="comment">//定义缓冲区对象，因为消费者要操作缓冲区</span></span><br><span class="line">    <span class="keyword">private</span> Buffer buffer;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Consumer</span><span class="params">(Buffer buffer)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.buffer = buffer;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span> (consum()&gt;=<span class="number">50</span>)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//消费</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">consum</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//从缓冲区从取出产品</span></span><br><span class="line">        <span class="type">Product</span> <span class="variable">product</span> <span class="operator">=</span> buffer.pull();</span><br><span class="line">        <span class="keyword">return</span> product.getId();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>主入口</p>
<p>需要先定义缓冲区，然后将缓冲区丢给生产者消费者线程，然后分别启动两个线程就可以了</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestPC1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//新建缓冲区</span></span><br><span class="line">        <span class="type">Buffer</span> <span class="variable">buffer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Buffer</span>();</span><br><span class="line">        <span class="comment">//生产者线程</span></span><br><span class="line">        <span class="type">Producer</span> <span class="variable">producer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Producer</span>(buffer);</span><br><span class="line">        <span class="comment">//消费者线程</span></span><br><span class="line">        <span class="type">Consumer</span> <span class="variable">consumer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Consumer</span>(buffer);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//启动生产者线程</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(producer,<span class="string">&quot;生产者&quot;</span>).start();</span><br><span class="line">        <span class="comment">//启动消费者线程</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(consumer,<span class="string">&quot;消费者&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>管程法总结</strong>：</p>
<ol>
<li>定义产品类</li>
<li>定义缓冲区，缓冲区里应该有缓冲区的大小（对象数组），有向缓冲区存入和从缓冲区取出的两个方法。</li>
<li>生产者<strong>向缓冲区存入</strong>的方法里面应该有对产品数量的判断，如果缓冲区的数量满了，线程就应该调用<code>wait()</code>方法进行等待，否则就生产新的产品，产品应该是从该方法的形参中来（其中应该是先将对象赋给数组，然后计数再自加），然后<code>notify()</code>通知消费者。</li>
<li>消费者<strong>从缓冲区取出</strong>的方法里也应该有对产品数量的判断，如果缓冲区的数量为0，则线程就调用<code>wait()</code>方法进行等待，否则消费产品（计数先自减，然后再将产品作为返回值），然后<code>notify()</code>通知生产者。</li>
<li>生产者线程也需要声明缓冲区类对象，因为后续需要对缓冲区进行操作，生产者生产是直接new一个产品，然后将产品存入到缓冲区中</li>
<li>消费者线程也需要声明缓冲区类对象，因为后续需要对缓冲区进行操作，消费者消费实际就是从缓冲区获取一个产品对象。</li>
<li>最后主入口里记得把缓冲区对象分别赋给生产者消费者线程。</li>
</ol>
</li>
</ol>
<h3 id="解决方式2：信号灯法"><a href="#解决方式2：信号灯法" class="headerlink" title="解决方式2：信号灯法"></a>解决方式2：信号灯法</h3><p>信号灯法就是手动设置一个标识位来限制生产者或者消费者对资源的访问。信号灯法适用于<code>类似两个孩子玩同一个玩具，生产者消费者必须操作同一个资源，生产者生产时消费者必须等待</code>的问题</p>
<ul>
<li><p>产品类，需要定义标志位，生产和消费两个方法</p>
<p>设置一个标识位默认为false，因为flag为false，所以消费者<code>wait()</code>等待，否则消费者消费，消费者消费完了之后<code>notify()</code>通知生产者生产，同时标识位取反。</p>
<p>同理，当flag为true的时候，生产者<code>wait()</code>等待，否则生产者生产，生产者生产完了<code>notify()</code>通知消费者消费，标识位取反。</p>
<p>逻辑就是当flag标识位为true的时候，生产者是<code>wait()</code>等待状态，消费者不是<code>wait()</code>状态，消费者正在消费，消费者消费完了之后<code>notify()</code>通知生产者生产，标识位反制。</p>
<p>总的来说就是生产者在操作资源的时候消费者不能操作，消费者操作资源的时候生产者不能操作资源，怎么判断生产者或者消费者有没有操作资源呢？就是靠标识位。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//产品</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Product</span>&#123;</span><br><span class="line">    <span class="comment">//产品名字</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">      标识位：</span></span><br><span class="line"><span class="comment">            T：消费者消费，生产者等待</span></span><br><span class="line"><span class="comment">            F：生产者生产，消费者等待</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> flag=<span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//消费</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">consum</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//为F，消费者等待</span></span><br><span class="line">        <span class="keyword">if</span> (!flag)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;正在消费&quot;</span>+getName());</span><br><span class="line">        <span class="comment">//通知生产者生产</span></span><br><span class="line">        <span class="built_in">this</span>.notifyAll();</span><br><span class="line">        <span class="comment">//改变标志位</span></span><br><span class="line">        flag=!flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//生产</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">produce</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//为T，生产者等待</span></span><br><span class="line">        <span class="keyword">if</span> (flag)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;正在生产&quot;</span>+getName());</span><br><span class="line">        <span class="comment">//通知消费者消费</span></span><br><span class="line">        <span class="built_in">this</span>.notifyAll();</span><br><span class="line">        <span class="comment">//改变标志位</span></span><br><span class="line">        flag=!flag;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
<li><p>生产者线程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//生产者</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Producer</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Product product;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Producer</span><span class="params">(Product product)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.product = product;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i%<span class="number">2</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                product.setName(<span class="string">&quot;产品1&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                product.setName(<span class="string">&quot;产品2&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//生产产品</span></span><br><span class="line">            product.produce();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
<li><p>消费者线程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//消费者</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Consumer</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Product product;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Consumer</span><span class="params">(Product product)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.product = product;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="comment">//消费产品</span></span><br><span class="line">            product.consum();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
<li><p>主入口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestPC2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Product</span> <span class="variable">product</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Product</span>();</span><br><span class="line">        <span class="comment">//启动两个线程</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Producer</span>(product),<span class="string">&quot;生产者&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Consumer</span>(product),<span class="string">&quot;消费者&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>信号灯法总结：</p>
<ol>
<li>定义中间<strong>产品</strong>，需要在产品里定义标识位属性以及生产和消费方法</li>
<li>定义<strong>消费方法</strong>，如果标识位为真则用<code>wait()</code>等待，否则消费然后<code>notify()</code>通知，最后标识位取反</li>
<li>定义<strong>生产方法</strong>，如果标识位为假则用<code>wait()</code>等待，否则生产然后<code>notify()</code>通知，最后标志位取反</li>
<li>在消费者或者生产者线程里只需要用循环生产或者消费就行了。</li>
</ol>
</li>
</ul>
<h3 id="同步锁（Synchronized）总结"><a href="#同步锁（Synchronized）总结" class="headerlink" title="同步锁（Synchronized）总结"></a>同步锁（Synchronized）总结</h3><p>锁就有点像事务，线程拿到锁之后就保存该线程先把这个资源用于自己的操作先做完再把锁释放。</p>
<p>有两种锁，<strong>synchronized</strong>和<strong>lock</strong>锁，第一个可以锁方法和代码块，而第二个只可以锁代码块。</p>
<h2 id="线程池"><a href="#线程池" class="headerlink" title="线程池"></a>线程池</h2><p>线程池就是可以限定最大同时运行线程的个数</p>
<p>线程池的使用方法：</p>
<ol>
<li>创建线程池服务，并且指定线程池大小</li>
<li>将线程放入线程池服务中</li>
<li>关闭线程池服务</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestPool</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//1、创建线程池服务，指定线程池大小，参数是线程池大小</span></span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">service</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">5</span>);</span><br><span class="line">        <span class="comment">//2、将线程放入线程池服务中</span></span><br><span class="line">        service.execute(<span class="keyword">new</span> <span class="title class_">MyThread1</span>());</span><br><span class="line">        service.execute(<span class="keyword">new</span> <span class="title class_">MyThread2</span>());</span><br><span class="line">        <span class="comment">//3、关闭线程池服务（切记）</span></span><br><span class="line">        service.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://fangaoxs.github.io/2020/07/13/back-end/Java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/" data-id="clto66l5e001ysck625pj40ni" data-title="Java多线程" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/5/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cookie/" rel="tag">Cookie</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GRPC/" rel="tag">GRPC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Golang/" rel="tag">Golang</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JWT/" rel="tag">JWT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OIDC/" rel="tag">OIDC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/devops/" rel="tag">devops</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/echarts/" rel="tag">echarts</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/" rel="tag">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kubernates/" rel="tag">kubernates</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/" rel="tag">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/uni-app/" rel="tag">uni-app</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/" rel="tag">webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/websocket/" rel="tag">websocket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" rel="tag">网络安全</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag">计算机网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Cookie/" style="font-size: 10px;">Cookie</a> <a href="/tags/GRPC/" style="font-size: 13.33px;">GRPC</a> <a href="/tags/Golang/" style="font-size: 18.33px;">Golang</a> <a href="/tags/JWT/" style="font-size: 10px;">JWT</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/OIDC/" style="font-size: 13.33px;">OIDC</a> <a href="/tags/Spring/" style="font-size: 13.33px;">Spring</a> <a href="/tags/devops/" style="font-size: 10px;">devops</a> <a href="/tags/docker/" style="font-size: 11.67px;">docker</a> <a href="/tags/echarts/" style="font-size: 10px;">echarts</a> <a href="/tags/http/" style="font-size: 11.67px;">http</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/javascript/" style="font-size: 15px;">javascript</a> <a href="/tags/kubernates/" style="font-size: 10px;">kubernates</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/redis/" style="font-size: 11.67px;">redis</a> <a href="/tags/uni-app/" style="font-size: 10px;">uni-app</a> <a href="/tags/vue/" style="font-size: 16.67px;">vue</a> <a href="/tags/webpack/" style="font-size: 10px;">webpack</a> <a href="/tags/websocket/" style="font-size: 10px;">websocket</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 11.67px;">数据库</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 11.67px;">数据结构</a> <a href="/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" style="font-size: 11.67px;">网络安全</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 10px;">计算机网络</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 11.67px;">设计模式</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">三月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/01/">一月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">十一月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">七月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">六月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">二月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">一月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">十月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">九月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">八月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">七月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">五月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">四月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">十一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/03/12/back-end/go/Goroutine%E8%B0%83%E5%BA%A6%E5%99%A8GMP/">Goroutine调度器GMP</a>
          </li>
        
          <li>
            <a href="/2024/01/31/back-end/docker/dockerfile/">dockerfile</a>
          </li>
        
          <li>
            <a href="/2023/11/07/network/caddy/http%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/">利用Caddy实现http反向代理</a>
          </li>
        
          <li>
            <a href="/2023/07/25/network/OIDC/%E7%BB%93%E5%90%88OIDC%E5%92%8CCookie%E5%AE%9E%E7%8E%B0SSO/">结合OIDC和Cookie实现SSO</a>
          </li>
        
          <li>
            <a href="/2023/07/24/back-end/Java/Java%E5%AE%B9%E5%99%A8/%E9%9B%86%E5%90%88/">Java集合</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 FanGaoXS<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>